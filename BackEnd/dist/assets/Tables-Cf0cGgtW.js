import{g as De,c as Ie,a as l,e as ke,j as e,s as K,f as re,h as Le,m as X,D as Mt,E as Y,F as it,o as Rt,y as At,G as Re,q as Ot,n as Dt,H as at,t as It,I as kt,J as Lt,K as be,i as lt,L as rt,M as ct,N as L,O as Et,B,Q as Ft,R as Wt,S as $t,U as se,V as Nt,W as Bt,X as Gt,Y as Ut,Z as zt,$ as Vt,a0 as Qt,a1 as Ht,a2 as qt,a3 as Yt,a4 as Kt,a5 as Xt,a6 as Jt,a7 as Zt,A as ee,a8 as en,a9 as tn,aa as nn,ab as an,ac as Z}from"./index-BIG_Oc3E.js";import{G as rn,T as C,F as sn,I as on,S as ln}from"./TextField-dE7RWr-P.js";import{M as U}from"./MenuItem-BoUBUscF.js";import{T as oe,a as ie,b as le,c as $,d as i,e as ce}from"./TableRow-C-V-EngA.js";import{P as dt}from"./Popper-CdamMMRV.js";import{I as ze}from"./IconButton-B5EBYIzT.js";import{T as te,C as cn}from"./Close-CzwwXcui.js";import{D as de,a as ue,b as pe}from"./DialogTitle-kltgsLOs.js";import{D as ye}from"./DialogActions-DBwgn4k6.js";import{S as ve,A as we}from"./Snackbar-CuwLgIGI.js";function dn(a){return De("MuiAccordionDetails",a)}Ie("MuiAccordionDetails",["root"]);const un=a=>{const{classes:s}=a;return Le({root:["root"]},dn,s)},pn=K("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(a,s)=>s.root})(X(({theme:a})=>({padding:a.spacing(1,2,2)}))),hn=l.forwardRef(function(s,c){const p=ke({props:s,name:"MuiAccordionDetails"}),{className:u,...h}=p,d=p,_=un(d);return e.jsx(pn,{className:re(_.root,u),ref:c,ownerState:d,...h})});function mn(a){return De("MuiAccordionSummary",a)}const ae=Ie("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),gn=a=>{const{classes:s,expanded:c,disabled:p,disableGutters:u}=a;return Le({root:["root",c&&"expanded",p&&"disabled",!u&&"gutters"],focusVisible:["focusVisible"],content:["content",c&&"expanded",!u&&"contentGutters"],expandIconWrapper:["expandIconWrapper",c&&"expanded"]},mn,s)},xn=K(it,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(a,s)=>s.root})(X(({theme:a})=>{const s={duration:a.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:a.spacing(0,2),transition:a.transitions.create(["min-height","background-color"],s),[`&.${ae.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`&.${ae.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity},[`&:hover:not(.${ae.disabled})`]:{cursor:"pointer"},variants:[{props:c=>!c.disableGutters,style:{[`&.${ae.expanded}`]:{minHeight:64}}}]}})),fn=K("span",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(a,s)=>s.content})(X(({theme:a})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:s=>!s.disableGutters,style:{transition:a.transitions.create(["margin"],{duration:a.transitions.duration.shortest}),[`&.${ae.expanded}`]:{margin:"20px 0"}}}]}))),jn=K("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(a,s)=>s.expandIconWrapper})(X(({theme:a})=>({display:"flex",color:(a.vars||a).palette.action.active,transform:"rotate(0deg)",transition:a.transitions.create("transform",{duration:a.transitions.duration.shortest}),[`&.${ae.expanded}`]:{transform:"rotate(180deg)"}}))),bn=l.forwardRef(function(s,c){const p=ke({props:s,name:"MuiAccordionSummary"}),{children:u,className:h,expandIcon:d,focusVisibleClassName:_,onClick:y,slots:A,slotProps:v,...j}=p,{disabled:D=!1,disableGutters:f,expanded:n,toggle:M}=l.useContext(Mt),x=r=>{M&&M(r),y&&y(r)},P={...p,expanded:n,disabled:D,disableGutters:f},R=gn(P),m={slots:A,slotProps:v},[S,w]=Y("root",{ref:c,shouldForwardComponentProp:!0,className:re(R.root,h),elementType:xn,externalForwardedProps:{...m,...j},ownerState:P,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:D,"aria-expanded":n,focusVisibleClassName:re(R.focusVisible,_)},getSlotProps:r=>({...r,onClick:b=>{var O;(O=r.onClick)==null||O.call(r,b),x(b)}})}),[I,F]=Y("content",{className:R.content,elementType:fn,externalForwardedProps:m,ownerState:P}),[o,t]=Y("expandIconWrapper",{className:R.expandIconWrapper,elementType:jn,externalForwardedProps:m,ownerState:P});return e.jsxs(S,{...w,children:[e.jsx(I,{...F,children:u}),d&&e.jsx(o,{...t,children:d})]})});function yn(a){return De("MuiTooltip",a)}const k=Ie("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function vn(a){return Math.round(a*1e5)/1e5}const wn=a=>{const{classes:s,disableInteractive:c,arrow:p,touch:u,placement:h}=a,d={popper:["popper",!c&&"popperInteractive",p&&"popperArrow"],tooltip:["tooltip",p&&"tooltipArrow",u&&"touch",`tooltipPlacement${be(h.split("-")[0])}`],arrow:["arrow"]};return Le(d,yn,s)},Sn=K(dt,{name:"MuiTooltip",slot:"Popper",overridesResolver:(a,s)=>{const{ownerState:c}=a;return[s.popper,!c.disableInteractive&&s.popperInteractive,c.arrow&&s.popperArrow,!c.open&&s.popperClose]}})(X(({theme:a})=>({zIndex:(a.vars||a).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:s})=>!s.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:s})=>!s,style:{pointerEvents:"none"}},{props:({ownerState:s})=>s.arrow,style:{[`&[data-popper-placement*="bottom"] .${k.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${k.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${k.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${k.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:s})=>s.arrow&&!s.isRtl,style:{[`&[data-popper-placement*="right"] .${k.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:s})=>s.arrow&&!!s.isRtl,style:{[`&[data-popper-placement*="right"] .${k.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:s})=>s.arrow&&!s.isRtl,style:{[`&[data-popper-placement*="left"] .${k.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:s})=>s.arrow&&!!s.isRtl,style:{[`&[data-popper-placement*="left"] .${k.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),Cn=K("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(a,s)=>{const{ownerState:c}=a;return[s.tooltip,c.touch&&s.touch,c.arrow&&s.tooltipArrow,s[`tooltipPlacement${be(c.placement.split("-")[0])}`]]}})(X(({theme:a})=>({backgroundColor:a.vars?a.vars.palette.Tooltip.bg:lt(a.palette.grey[700],.92),borderRadius:(a.vars||a).shape.borderRadius,color:(a.vars||a).palette.common.white,fontFamily:a.typography.fontFamily,padding:"4px 8px",fontSize:a.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:a.typography.fontWeightMedium,[`.${k.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${k.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${k.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${k.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:s})=>s.arrow,style:{position:"relative",margin:0}},{props:({ownerState:s})=>s.touch,style:{padding:"8px 16px",fontSize:a.typography.pxToRem(14),lineHeight:`${vn(16/14)}em`,fontWeight:a.typography.fontWeightRegular}},{props:({ownerState:s})=>!s.isRtl,style:{[`.${k.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${k.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:s})=>!s.isRtl&&s.touch,style:{[`.${k.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${k.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:s})=>!!s.isRtl,style:{[`.${k.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${k.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:s})=>!!s.isRtl&&s.touch,style:{[`.${k.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${k.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:s})=>s.touch,style:{[`.${k.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:s})=>s.touch,style:{[`.${k.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),_n=K("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(a,s)=>s.arrow})(X(({theme:a})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:a.vars?a.vars.palette.Tooltip.bg:lt(a.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let Ae=!1;const st=new Lt;let fe={x:0,y:0};function Oe(a,s){return(c,...p)=>{s&&s(c,...p),a(c,...p)}}const q=l.forwardRef(function(s,c){const p=ke({props:s,name:"MuiTooltip"}),{arrow:u=!1,children:h,classes:d,components:_={},componentsProps:y={},describeChild:A=!1,disableFocusListener:v=!1,disableHoverListener:j=!1,disableInteractive:D=!1,disableTouchListener:f=!1,enterDelay:n=100,enterNextDelay:M=0,enterTouchDelay:x=700,followCursor:P=!1,id:R,leaveDelay:m=0,leaveTouchDelay:S=1500,onClose:w,onOpen:I,open:F,placement:o="bottom",PopperComponent:t,PopperProps:r={},slotProps:b={},slots:O={},title:T,TransitionComponent:E,TransitionProps:N,...W}=p,G=l.isValidElement(h)?h:e.jsx("span",{children:h}),Qe=Rt(),ut=At(),[he,He]=l.useState(),[Ee,pt]=l.useState(null),Se=l.useRef(!1),Fe=D||P,qe=Re(),We=Re(),Ce=Re(),Ye=Re(),[ht,Ke]=Ot({controlled:F,default:!1,name:"Tooltip",state:"open"});let H=ht;const $e=Dt(R),me=l.useRef(),_e=at(()=>{me.current!==void 0&&(document.body.style.WebkitUserSelect=me.current,me.current=void 0),Ye.clear()});l.useEffect(()=>_e,[_e]);const Xe=g=>{st.clear(),Ae=!0,Ke(!0),I&&!H&&I(g)},Pe=at(g=>{st.start(800+m,()=>{Ae=!1}),Ke(!1),w&&H&&w(g),qe.start(Qe.transitions.duration.shortest,()=>{Se.current=!1})}),Te=g=>{Se.current&&g.type!=="touchstart"||(he&&he.removeAttribute("title"),We.clear(),Ce.clear(),n||Ae&&M?We.start(Ae?M:n,()=>{Xe(g)}):Xe(g))},Ne=g=>{We.clear(),Ce.start(m,()=>{Pe(g)})},[,Je]=l.useState(!1),Ze=g=>{rt(g.target)||(Je(!1),Ne(g))},et=g=>{he||He(g.currentTarget),rt(g.target)&&(Je(!0),Te(g))},tt=g=>{Se.current=!0;const Q=G.props;Q.onTouchStart&&Q.onTouchStart(g)},mt=g=>{tt(g),Ce.clear(),qe.clear(),_e(),me.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Ye.start(x,()=>{document.body.style.WebkitUserSelect=me.current,Te(g)})},gt=g=>{G.props.onTouchEnd&&G.props.onTouchEnd(g),_e(),Ce.start(S,()=>{Pe(g)})};l.useEffect(()=>{if(!H)return;function g(Q){Q.key==="Escape"&&Pe(Q)}return document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}},[Pe,H]);const xt=It(kt(G),He,c);!T&&T!==0&&(H=!1);const Be=l.useRef(),ft=g=>{const Q=G.props;Q.onMouseMove&&Q.onMouseMove(g),fe={x:g.clientX,y:g.clientY},Be.current&&Be.current.update()},ge={},Ge=typeof T=="string";A?(ge.title=!H&&Ge&&!j?T:null,ge["aria-describedby"]=H?$e:null):(ge["aria-label"]=Ge?T:null,ge["aria-labelledby"]=H&&!Ge?$e:null);const z={...ge,...W,...G.props,className:re(W.className,G.props.className),onTouchStart:tt,ref:xt,...P?{onMouseMove:ft}:{}},xe={};f||(z.onTouchStart=mt,z.onTouchEnd=gt),j||(z.onMouseOver=Oe(Te,z.onMouseOver),z.onMouseLeave=Oe(Ne,z.onMouseLeave),Fe||(xe.onMouseOver=Te,xe.onMouseLeave=Ne)),v||(z.onFocus=Oe(et,z.onFocus),z.onBlur=Oe(Ze,z.onBlur),Fe||(xe.onFocus=et,xe.onBlur=Ze));const J={...p,isRtl:ut,arrow:u,disableInteractive:Fe,placement:o,PopperComponentProp:t,touch:Se.current},V=typeof b.popper=="function"?b.popper(J):b.popper,jt=l.useMemo(()=>{var Q,nt;let g=[{name:"arrow",enabled:!!Ee,options:{element:Ee,padding:4}}];return(Q=r.popperOptions)!=null&&Q.modifiers&&(g=g.concat(r.popperOptions.modifiers)),(nt=V==null?void 0:V.popperOptions)!=null&&nt.modifiers&&(g=g.concat(V.popperOptions.modifiers)),{...r.popperOptions,...V==null?void 0:V.popperOptions,modifiers:g}},[Ee,r.popperOptions,V==null?void 0:V.popperOptions]),Ue=wn(J),bt=typeof b.transition=="function"?b.transition(J):b.transition,Me={slots:{popper:_.Popper,transition:_.Transition??E,tooltip:_.Tooltip,arrow:_.Arrow,...O},slotProps:{arrow:b.arrow??y.arrow,popper:{...r,...V??y.popper},tooltip:b.tooltip??y.tooltip,transition:{...N,...bt??y.transition}}},[yt,vt]=Y("popper",{elementType:Sn,externalForwardedProps:Me,ownerState:J,className:re(Ue.popper,r==null?void 0:r.className)}),[wt,St]=Y("transition",{elementType:rn,externalForwardedProps:Me,ownerState:J}),[Ct,_t]=Y("tooltip",{elementType:Cn,className:Ue.tooltip,externalForwardedProps:Me,ownerState:J}),[Pt,Tt]=Y("arrow",{elementType:_n,className:Ue.arrow,externalForwardedProps:Me,ownerState:J,ref:pt});return e.jsxs(l.Fragment,{children:[l.cloneElement(G,z),e.jsx(yt,{as:t??dt,placement:o,anchorEl:P?{getBoundingClientRect:()=>({top:fe.y,left:fe.x,right:fe.x,bottom:fe.y,width:0,height:0})}:he,popperRef:Be,open:he?H:!1,id:$e,transition:!0,...xe,...vt,popperOptions:jt,children:({TransitionProps:g})=>e.jsx(wt,{timeout:Qe.transitions.duration.shorter,...g,...St,children:e.jsxs(Ct,{..._t,children:[T,u?e.jsx(Pt,{...Tt}):null]})})})]})}),Pn=ct(e.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");function Tn(a){return De("MuiTableSortLabel",a)}const Ve=Ie("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc","directionDesc","directionAsc"]),Mn=a=>{const{classes:s,direction:c,active:p}=a,u={root:["root",p&&"active",`direction${be(c)}`],icon:["icon",`iconDirection${be(c)}`]};return Le(u,Tn,s)},Rn=K(it,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(a,s)=>{const{ownerState:c}=a;return[s.root,c.active&&s.active]}})(X(({theme:a})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(a.vars||a).palette.text.secondary},"&:hover":{color:(a.vars||a).palette.text.secondary,[`& .${Ve.icon}`]:{opacity:.5}},[`&.${Ve.active}`]:{color:(a.vars||a).palette.text.primary,[`& .${Ve.icon}`]:{opacity:1,color:(a.vars||a).palette.text.secondary}}}))),An=K("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(a,s)=>{const{ownerState:c}=a;return[s.icon,s[`iconDirection${be(c.direction)}`]]}})(X(({theme:a})=>({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:a.transitions.create(["opacity","transform"],{duration:a.transitions.duration.shorter}),userSelect:"none",variants:[{props:{direction:"desc"},style:{transform:"rotate(0deg)"}},{props:{direction:"asc"},style:{transform:"rotate(180deg)"}}]}))),je=l.forwardRef(function(s,c){const p=ke({props:s,name:"MuiTableSortLabel"}),{active:u=!1,children:h,className:d,direction:_="asc",hideSortIcon:y=!1,IconComponent:A=Pn,slots:v={},slotProps:j={},...D}=p,f={...p,active:u,direction:_,hideSortIcon:y,IconComponent:A},n=Mn(f),M={slots:v,slotProps:j},[x,P]=Y("root",{elementType:Rn,externalForwardedProps:M,ownerState:f,className:re(n.root,d),ref:c}),[R,m]=Y("icon",{elementType:An,externalForwardedProps:M,ownerState:f,className:n.icon});return e.jsxs(x,{disableRipple:!0,component:"span",...P,...D,children:[h,y&&!u?null:e.jsx(R,{as:A,...m})]})}),On=ct(e.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),Dn=({ordinances:a})=>{const s=()=>{const c=window.open("","_blank");c.document.write(`
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Records Summary</title>
   <style>
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        padding: 30px;
        background-color: #f4f6fa;
        color: #2c3e50;
        line-height: 1.6;
    }

    h2 {
        text-align: center;
        margin-bottom: 30px;
        color: #34495e;
        font-size: 28px;
        letter-spacing: 1px;
    }

    ol {
        padding-left: 0;
        list-style: none;
        max-width: 800px;
        margin: 0 auto;
    }

    .summary-item {
        background: #ffffff;
        padding: 20px;
        margin-bottom: 15px;
        border-left: 6px solid #3498db;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        transition: background 0.3s ease-in-out;
    }

    .summary-item:hover {
        background: #f9fbfd;
    }

    .summary-item strong {
        color: #2c3e50;
        font-weight: 600;
    }

    .print-btn {
        display: block;
        width: 180px;
        margin: 30px auto;
        padding: 12px 20px;
        text-align: center;
        background: #3498db;
        color: #fff;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        transition: background 0.3s;
    }

    .print-btn:hover {
        background: #2980b9;
    }

    @media print {
        .print-btn { display: none; }
        body {
            background: #fff;
            padding: 0;
            color: #000;
        }
        .summary-item {
            page-break-inside: avoid;
            border-left-color: #000;
            box-shadow: none;
        }
    }
</style>

</head>
<body>

    <div class="summary-container">
        <h2>Records Summary</h2>
        <ol>
            ${a.map(p=>`<li class="summary-item">
                            <strong>Title:</strong> ${p.title} <br/>
                            <strong>Type:</strong> ${p.document_type} <br/>
                            <strong>Date Issued:</strong> ${new Intl.DateTimeFormat("en-US",{dateStyle:"medium"}).format(new Date(p.date_issued))}</br>
                                                        <strong>Details:</strong> ${p.details} 
                        </li>`).join("")}
        </ol>
        <button class="print-btn" onclick="window.print();">Print Summary</button>
    </div>

</body>
</html>

    `),c.document.close()};return e.jsx(L,{onClick:s,style:{marginTop:"10px",padding:"10px",backgroundColor:"#6200ea",color:"white",border:"none",cursor:"pointer",borderRadius:"5px"},children:"Print Summary"})},In=()=>{const[a,s]=l.useState([]),[c,p]=l.useState(!1),[u,h]=l.useState(""),[d,_]=l.useState(""),[y,A]=l.useState(""),[v,j]=l.useState(0),[D,f]=l.useState(10),[n,M]=l.useState("asc"),[x,P]=l.useState("title");l.useEffect(()=>{R()},[]);const R=async()=>{try{const r=await Et();s(r)}catch(r){console.error("Error fetching ordinances:",r)}},m=async r=>{if(window.confirm("Are you sure you want to delete this record?"))try{await Wt(r),R()}catch(b){console.error("Error deleting record:",b)}},S=r=>{_(r.target.value)},w=r=>{A(r.target.value)},I=(r,b)=>{j(b)},F=r=>{f(parseInt(r.target.value,10)),j(0)},o=r=>{M(x===r&&n==="asc"?"desc":"asc"),P(r)},t=l.useMemo(()=>a.filter(r=>Object.entries(r).filter(([b])=>b!=="id").some(([,b])=>b!=null)).filter(r=>{const b=Object.entries(r).filter(([T])=>T!=="file_path").some(([T,E])=>E&&E.toString().toLowerCase().includes(d.toLowerCase())),O=!y||r.document_type===y;return b&&O}).sort((r,b)=>{let O=r[x]??"",T=b[x]??"";return x==="date_issued"&&(O=new Date(O||0),T=new Date(T||0)),O<T?n==="asc"?-1:1:O>T?n==="asc"?1:-1:0}),[a,d,y,x,n]);return e.jsxs("div",{children:[e.jsxs(B,{display:"flex",justifyContent:"space-between",alignItems:"center",gap:2,flexWrap:"wrap",children:[e.jsxs(B,{children:[e.jsx(C,{label:"Search Record",variant:"outlined",margin:"normal",value:d,onChange:S}),e.jsxs(sn,{variant:"outlined",margin:"normal",sx:{minWidth:200},children:[e.jsx(on,{children:"Document Type"}),e.jsxs(ln,{value:y,onChange:w,label:"Document Type",children:[e.jsx(U,{value:"",children:"All"}),e.jsx(U,{value:"Ordinance",children:"Ordinance"}),e.jsx(U,{value:"Resolution",children:"Resolution"}),e.jsx(U,{value:"Executive Order",children:"Executive Order"}),e.jsx(U,{value:"Memo",children:"Memo"})]})]})]}),e.jsx(B,{children:e.jsx(Dn,{ordinances:t})})]}),e.jsx(oe,{children:e.jsxs(ie,{stickyHeader:!0,size:"medium",children:[e.jsx(le,{children:e.jsxs($,{children:[e.jsx(i,{children:e.jsx(je,{active:x==="title",direction:x==="title"?n:"asc",onClick:()=>o("title"),children:"Title"})}),e.jsx(i,{children:e.jsx(je,{active:x==="document_type",direction:x==="document_type"?n:"asc",onClick:()=>o("document_type"),children:"Type of Document"})}),e.jsx(i,{children:e.jsx(je,{active:x==="number",direction:x==="number"?n:"asc",onClick:()=>o("number"),children:"Number"})}),e.jsx(i,{children:e.jsx(je,{active:x==="details",direction:x==="details"?n:"asc",onClick:()=>o("details"),children:"Details"})}),e.jsx(i,{children:e.jsx(je,{active:x==="date_issued",direction:x==="date_issued"?n:"asc",onClick:()=>o("date_issued"),children:"Date Issued"})}),e.jsx(i,{children:"Date of Effectivity"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(ce,{children:t.slice(v*D,v*D+D).map(r=>e.jsxs($,{hover:!0,children:[e.jsx(i,{children:e.jsx(q,{title:r.title,arrow:!0,children:e.jsx("span",{style:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"180px"},children:r.title})})}),e.jsx(i,{children:e.jsx(q,{title:r.document_type,arrow:!0,children:e.jsx("span",{style:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"180px"},children:r.document_type})})}),e.jsx(i,{children:e.jsx(q,{title:r.number,arrow:!0,children:e.jsx("span",{style:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"120px"},children:r.number})})}),e.jsx(i,{children:e.jsx(q,{title:r.details,arrow:!0,children:e.jsx("span",{style:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"200px"},children:r.details})})}),e.jsx(i,{children:e.jsx(q,{title:new Intl.DateTimeFormat("en-US",{dateStyle:"medium"}).format(new Date(r.date_issued)),arrow:!0,children:e.jsx("span",{children:new Intl.DateTimeFormat("en-US",{dateStyle:"medium"}).format(new Date(r.date_issued))})})}),e.jsx(i,{children:e.jsx(q,{title:new Intl.DateTimeFormat("en-US",{dateStyle:"medium"}).format(new Date(r.date_effectivity)),arrow:!0,children:e.jsx("span",{children:new Intl.DateTimeFormat("en-US",{dateStyle:"medium"}).format(new Date(r.date_effectivity))})})}),e.jsx(i,{children:e.jsx(q,{title:r.status,arrow:!0,children:e.jsx("span",{children:r.status})})}),e.jsxs(i,{children:[r.file_path&&e.jsx(q,{title:"Preview File",arrow:!0,children:e.jsx(ze,{onClick:()=>Ft(r.file_path,h,p),children:e.jsx("img",{src:"/Printer.svg",alt:"preview"})})}),e.jsx(q,{title:"Delete Ordinance",arrow:!0,children:e.jsx(ze,{onClick:()=>m(r.id),color:"error",children:e.jsx("img",{src:"/trash.svg",alt:"delete"})})})]})]},r.id))})]})}),e.jsx(B,{sx:{position:"absolute",bottom:0,right:0},children:e.jsx(te,{rowsPerPageOptions:[10,20,100],component:"div",count:t.length,rowsPerPage:D,page:v,onPageChange:I,onRowsPerPageChange:F})}),e.jsxs(de,{open:c,onClose:()=>p(!1),maxWidth:"lg",fullWidth:!0,children:[e.jsxs(ue,{children:["Preview Records",e.jsx(ze,{onClick:()=>p(!1),style:{float:"right"},children:e.jsx(cn,{})})]}),e.jsx(pe,{dividers:!0,children:u?e.jsx("iframe",{src:u,width:"100%",height:"600px",title:"Ordinance Preview",style:{border:"none"}}):e.jsx("p",{children:"No file selected."})})]})]})};function kn(){const[a,s]=l.useState([]),[c,p]=l.useState(""),[u,h]=l.useState(0),[d,_]=l.useState(10),[y,A]=l.useState(!0),[v,j]=l.useState({open:!1,message:"",severity:"info"}),[D,f]=l.useState(!1),[n,M]=l.useState(null);l.useEffect(()=>{x()},[]);const x=async()=>{try{const t=await $t();s(t||[])}catch{j({open:!0,message:"No Ordinance Found.",severity:"error"})}finally{A(!1)}},P=l.useMemo(()=>a.filter(t=>{var T,E,N;const r=c.toLowerCase(),b=((T=t.title)==null?void 0:T.toLowerCase().includes(r))||((E=t.number)==null?void 0:E.toString().toLowerCase().includes(r)),O=(N=t.coverage_scopes)==null?void 0:N.some(W=>["target_beneficiaries","geographical_coverage","inclusive_period"].some(G=>W[G]&&W[G].toLowerCase().includes(r)));return b||O}),[a,c]),R=(t,r)=>{M({id:(r==null?void 0:r.id)||"",ordinance_id:t.id,inclusive_period:(r==null?void 0:r.inclusive_period)||"",target_beneficiaries:(r==null?void 0:r.target_beneficiaries)||"General Public",geographical_coverage:(r==null?void 0:r.geographical_coverage)||""}),f(!0)},m=t=>{M({...n,[t.target.name]:t.target.value})},S=async()=>{try{n.id?(await Nt(n.id,n),alert("Coverage scope updated successfully!")):(await Bt(n),alert("Coverage scope added successfully!")),f(!1),A(!0),x()}catch(t){j({open:!0,message:"Failed to save coverage scope. Please try again.",severity:"error"}),console.error("Error saving coverage scope:",t)}},w=t=>p(t.target.value),I=(t,r)=>h(r),F=t=>{_(parseInt(t.target.value,10)),h(0)};if(y)return e.jsx(se,{});const o=["City-Wide","Alicaocao","Alinam","Amobocan","Andarayan","Baculod","Baringin Norte","Baringin Sur","Buena Suerte","Bugallon","Buyon","Cabaruan","Cabugao","Carabatan Bacareno","Carabatan Chica","Carabatan Grande","Carabatan Punta","Casalatan","Cassap Fuera","Catalina","Culalabat","Dabburab","De Vera","Dianao","Dissimuray","District I (Poblacion)","District II (Poblacion)","District III (Poblacion)","Duminit","Faustino (Sipay)","Gagabutan","Gappal","Guayabal","Labinab","Linglingay","Mabantad","Maligaya","Manaoag","Marabulig I","Marabulig II","Minante I","Minante II","Nagcampegan","Naganacan","Nagrumbuan","Nungnungan I","Nungnungan II","Pinoma","Rizal","Rizaluna","Rogus","San Antonio","San Fermin (Poblacion)","San Francisco","San Isidro","San Luis","San Pablo (Casap Hacienda)","Santa Luciana (Daburab 2)","Santa Maria","Sillawit","Sinippil","Tagaran","Turayong","Union","Villa Concepcion","Villa Luna","Villaflor"];return e.jsxs("div",{children:[e.jsx(C,{label:"Search Record",variant:"outlined",margin:"normal",value:c,onChange:w}),e.jsx(oe,{children:e.jsxs(ie,{children:[e.jsx(le,{children:e.jsxs($,{children:[e.jsx(i,{children:"Title"}),e.jsx(i,{children:"Inclusive Period"}),e.jsx(i,{children:"Target Beneficiaries"}),e.jsx(i,{children:"Geographical Coverage"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(ce,{children:P.slice(u*d,u*d+d).flatMap(t=>t.coverage_scopes.length>0?t.coverage_scopes.map(r=>e.jsxs($,{children:[e.jsxs(i,{children:[t.title," ",t.number]}),e.jsx(i,{children:r.inclusive_period||"No coverage scope added"}),e.jsx(i,{children:r.target_beneficiaries}),e.jsx(i,{children:r.geographical_coverage}),e.jsx(i,{children:e.jsx(L,{variant:"outlined",onClick:()=>R(t,r),children:"Edit"})})]},`${t.id}-${r.id}`)):e.jsxs($,{children:[e.jsxs(i,{children:[t.title," ",t.number]}),e.jsx(i,{colSpan:3,children:"No coverage scope available"}),e.jsx(i,{children:e.jsx(L,{variant:"contained",onClick:()=>R(t,null),children:"Add"})})]},t.id))})]})}),e.jsx(B,{sx:{position:"absolute",bottom:0,right:0},children:e.jsx(te,{rowsPerPageOptions:[10,20,100],component:"div",count:P.length,rowsPerPage:d,page:u,onPageChange:I,onRowsPerPageChange:F})}),e.jsxs(de,{open:D,onClose:()=>f(!1),children:[e.jsxs(ue,{children:[n!=null&&n.id?"Edit":"Add"," Coverage Scope"]}),e.jsxs(pe,{children:[e.jsx(C,{label:"Inclusive Period",name:"inclusive_period",value:(n==null?void 0:n.inclusive_period)||"",onChange:m,fullWidth:!0,margin:"normal"}),e.jsx(C,{label:"Target Beneficiaries",name:"target_beneficiaries",value:(n==null?void 0:n.target_beneficiaries)||"General Public",onChange:m,select:!0,fullWidth:!0,margin:"normal",children:["General Public","Women","Children","Solo Parents","PWDs","MSMEs","Others"].map(t=>e.jsx(U,{value:t,children:t},t))}),e.jsx(C,{label:"Geographical Coverage",name:"geographical_coverage",value:(n==null?void 0:n.geographical_coverage)||"",onChange:m,fullWidth:!0,select:!0,margin:"normal",children:o.map(t=>e.jsx(U,{value:t,children:t},t))})]}),e.jsxs(ye,{children:[e.jsx(L,{onClick:()=>f(!1),children:"Cancel"}),e.jsx(L,{variant:"contained",onClick:S,children:"Save"})]})]}),e.jsx(ve,{open:v.open,autoHideDuration:4e3,onClose:()=>j({open:!1,message:"",severity:"info"}),children:e.jsx(we,{onClose:()=>j({open:!1,message:"",severity:"info"}),severity:v.severity,sx:{width:"100%"},children:v.message})})]})}function Ln(){const[a,s]=l.useState([]),[c,p]=l.useState(""),[u,h]=l.useState(0),[d,_]=l.useState(10),[y,A]=l.useState(!0),[v,j]=l.useState({open:!1,message:"",severity:"info"}),[D,f]=l.useState(!1),[n,M]=l.useState(null);l.useEffect(()=>{x()},[]);const x=async()=>{try{const o=await Gt();s(o||[])}catch{j({open:!0,message:"No Ordinance Found.",severity:"error"})}finally{A(!1)}},P=l.useMemo(()=>a.filter(o=>{var O,T,E;const t=c.toLowerCase(),r=((O=o.title)==null?void 0:O.toLowerCase().includes(t))||((T=o.number)==null?void 0:T.toString().toLowerCase().includes(t)),b=(E=o.objectives_implementation)==null?void 0:E.some(N=>["lead_agency","supporting_agencies","policy_objectives","key_provisions","programs_activities"].some(W=>N[W]&&N[W].toLowerCase().includes(t)));return r||b}),[a,c]),R=(o,t)=>{M({id:(t==null?void 0:t.id)||"",ordinance_id:o.id,policy_objectives:(t==null?void 0:t.policy_objectives)||"",lead_agency:(t==null?void 0:t.lead_agency)||"",supporting_agencies:(t==null?void 0:t.supporting_agencies)||"",key_provisions:(t==null?void 0:t.key_provisions)||"",programs_activities:(t==null?void 0:t.programs_activities)||""}),f(!0)},m=o=>{M({...n,[o.target.name]:o.target.value})},S=async()=>{try{n.id?(await Ut(n.id,n),alert("Coverage scope updated successfully!")):(await zt(n),alert("Coverage scope added successfully!")),f(!1),A(!0),x()}catch(o){j({open:!0,message:"Failed to save coverage scope. Please try again.",severity:"error"}),console.error("Error saving coverage scope:",o)}},w=o=>p(o.target.value),I=(o,t)=>h(t),F=o=>{_(parseInt(o.target.value,10)),h(0)};return y?e.jsx(se,{}):e.jsxs("div",{children:[e.jsx(C,{label:"Search Record",variant:"outlined",margin:"normal",value:c,onChange:w}),e.jsx(oe,{children:e.jsxs(ie,{children:[e.jsx(le,{children:e.jsxs($,{children:[e.jsx(i,{children:"Title"}),e.jsx(i,{children:"Policy Objectives"}),e.jsx(i,{children:"Lead Agency"}),e.jsx(i,{children:"Supporting Agencies"}),e.jsx(i,{children:"Key Provisions"}),e.jsx(i,{children:"Programs/Activities"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(ce,{children:P.slice(u*d,u*d+d).flatMap(o=>o.objectives_implementation.length>0?o.objectives_implementation.map(t=>e.jsxs($,{children:[e.jsxs(i,{children:[o.title," ",o.number]}),console.log(t),e.jsx(i,{children:t.policy_objectives||"No Objectives Data"}),e.jsx(i,{children:t.lead_agency}),e.jsx(i,{children:t.supporting_agencies}),e.jsx(i,{children:t.key_provisions}),e.jsx(i,{children:t.programs_activities}),e.jsx(i,{children:e.jsx(L,{variant:"outlined",onClick:()=>R(o,t),children:"Edit"})})]},`${o.id}-${t.id}`)):e.jsxs($,{children:[e.jsxs(i,{children:[o.title," ",o.number]}),e.jsx(i,{colSpan:5,children:"No Objectives/Implementation"}),e.jsx(i,{children:e.jsx(L,{variant:"contained",onClick:()=>R(o,null),children:"Add"})})]},o.id))})]})}),e.jsx(B,{sx:{position:"absolute",bottom:0,right:0},children:e.jsx(te,{rowsPerPageOptions:[10,20,100],component:"div",count:P.length,rowsPerPage:d,page:u,onPageChange:I,onRowsPerPageChange:F})}),e.jsxs(de,{open:D,onClose:()=>f(!1),children:[e.jsxs(ue,{children:[n!=null&&n.id?"Edit":"Add"," Coverage Scope"]}),e.jsxs(pe,{children:[e.jsx(C,{label:"Policy Objectives",name:"policy_objectives",value:(n==null?void 0:n.policy_objectives)||"",onChange:m,fullWidth:!0,margin:"normal"}),e.jsx(C,{label:"Lead Agency ",name:"lead_agency",value:(n==null?void 0:n.lead_agency)||"",onChange:m,fullWidth:!0,margin:"normal"}),e.jsx(C,{label:"Supporting Agencies",name:"supporting_agencies",value:(n==null?void 0:n.supporting_agencies)||"",onChange:m,fullWidth:!0,margin:"normal"}),e.jsx(C,{label:"Key Provisions",name:"key_provisions",value:(n==null?void 0:n.key_provisions)||"",onChange:m,fullWidth:!0,margin:"normal"}),e.jsx(C,{label:"Programs Activities",name:"programs_activities",value:(n==null?void 0:n.programs_activities)||"",onChange:m,fullWidth:!0,margin:"normal"})]}),e.jsxs(ye,{children:[e.jsx(L,{onClick:()=>f(!1),children:"Cancel"}),e.jsx(L,{variant:"contained",onClick:S,children:"Save"})]})]}),e.jsx(ve,{open:v.open,autoHideDuration:4e3,onClose:()=>j({open:!1,message:"",severity:"info"}),children:e.jsx(we,{onClose:()=>j({open:!1,message:"",severity:"info"}),severity:v.severity,sx:{width:"100%"},children:v.message})})]})}function En(){const[a,s]=l.useState([]),[c,p]=l.useState(""),[u,h]=l.useState(0),[d,_]=l.useState(10),[y,A]=l.useState(!0),[v,j]=l.useState({open:!1,message:"",severity:"info"}),[D,f]=l.useState(!1),[n,M]=l.useState(null);l.useEffect(()=>{x()},[]);const x=async()=>{try{const t=await Vt();s(t||[])}catch{j({open:!0,message:"No Ordinance Found.",severity:"error"})}finally{A(!1)}},P=l.useMemo(()=>a.filter(t=>{var T,E,N;const r=c.toLowerCase(),b=((T=t.title)==null?void 0:T.toLowerCase().includes(r))||((E=t.number)==null?void 0:E.toString().toLowerCase().includes(r)),O=(N=t.budget_allocation)==null?void 0:N.some(W=>["allocated_budget","utilized_budget","gad_budget","financial_transparency_measures"].some(G=>W[G]&&W[G].toLowerCase().includes(r)));return b||O}),[a,c]),R=(t,r)=>{M({id:(r==null?void 0:r.id)||"",ordinance_id:t.id,allocated_budget:(r==null?void 0:r.allocated_budget)||"",utilized_budget:(r==null?void 0:r.utilized_budget)||"",gad_budget:(r==null?void 0:r.gad_budget)||"",financial_transparency_measures:(r==null?void 0:r.financial_transparency_measures)||""}),f(!0)},m=t=>{M({...n,[t.target.name]:t.target.value})},S=async()=>{try{n.id?(await Qt(n.id,n),alert("Coverage scope updated successfully!")):(await Ht(n),alert("Coverage scope added successfully!")),f(!1),A(!0),x()}catch(t){j({open:!0,message:"Failed to save coverage scope. Please try again.",severity:"error"}),console.error("Error saving coverage scope:",t)}},w=t=>p(t.target.value),I=(t,r)=>h(r),F=t=>{_(parseInt(t.target.value,10)),h(0)};if(y)return e.jsx(se,{});const o=t=>!t||isNaN(t)?"â‚±0.00":new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(t);return e.jsxs("div",{children:[e.jsx(C,{label:"Search Record",variant:"outlined",margin:"normal",value:c,onChange:w}),e.jsx(oe,{children:e.jsxs(ie,{children:[e.jsx(le,{children:e.jsxs($,{children:[e.jsx(i,{children:"Title"}),e.jsx(i,{children:"Allocated Budget"}),e.jsx(i,{children:"Utilized Budget"}),e.jsx(i,{children:"GAD Budget"}),e.jsx(i,{children:"Financial Transparency Measures"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(ce,{children:P.slice(u*d,u*d+d).flatMap(t=>t.budget_allocation.length>0?t.budget_allocation.map(r=>e.jsxs($,{children:[e.jsxs(i,{children:[t.title," ",t.number]}),e.jsx(i,{children:o(r.allocated_budget)}),e.jsx(i,{children:o(r.utilized_budget)}),e.jsx(i,{children:o(r.gad_budget)}),e.jsx(i,{children:r.financial_transparency_measures}),e.jsx(i,{children:e.jsx(L,{variant:"outlined",onClick:()=>R(t,r),children:"Edit"})})]},`${t.id}-${r.id}`)):e.jsxs($,{children:[e.jsxs(i,{children:[t.title," ",t.number]}),e.jsx(i,{colSpan:4,children:"No Budget Allocation Data"}),e.jsx(i,{children:e.jsx(L,{variant:"contained",onClick:()=>R(t,null),children:"Add"})})]},t.id))})]})}),e.jsx(B,{sx:{position:"absolute",bottom:0,right:0},children:e.jsx(te,{rowsPerPageOptions:[10,20,100],component:"div",count:P.length,rowsPerPage:d,page:u,onPageChange:I,onRowsPerPageChange:F})}),e.jsxs(de,{open:D,onClose:()=>f(!1),children:[e.jsxs(ue,{children:[n!=null&&n.id?"Edit":"Add"," Coverage Scope"]}),e.jsxs(pe,{children:[e.jsx(C,{label:"Allocated Budget",name:"allocated_budget",type:"number",value:(n==null?void 0:n.allocated_budget)||"",onChange:m,fullWidth:!0,margin:"normal"}),e.jsx(C,{label:"Utilized Budget",type:"number",name:"utilized_budget",value:(n==null?void 0:n.utilized_budget)||"",onChange:m,fullWidth:!0,margin:"normal"}),e.jsx(C,{label:"GAD Budget",type:"number",name:"gad_budget",value:(n==null?void 0:n.gad_budget)||"",onChange:m,fullWidth:!0,margin:"normal"}),e.jsx(C,{label:"Financial Transparency Measures",name:"financial_transparency_measures",value:(n==null?void 0:n.financial_transparency_measures)||"",onChange:m,fullWidth:!0,margin:"normal"})]}),e.jsxs(ye,{children:[e.jsx(L,{onClick:()=>f(!1),children:"Cancel"}),e.jsx(L,{variant:"contained",onClick:S,children:"Save"})]})]}),e.jsx(ve,{open:v.open,autoHideDuration:4e3,onClose:()=>j({open:!1,message:"",severity:"info"}),children:e.jsx(we,{onClose:()=>j({open:!1,message:"",severity:"info"}),severity:v.severity,sx:{width:"100%"},children:v.message})})]})}function Fn(){const[a,s]=l.useState([]),[c,p]=l.useState(""),[u,h]=l.useState(0),[d,_]=l.useState(10),[y,A]=l.useState(!0),[v,j]=l.useState({open:!1,message:"",severity:"info"}),[D,f]=l.useState(!1),[n,M]=l.useState(null);l.useEffect(()=>{x()},[]);const x=async()=>{try{const o=await qt();s(o||[])}catch{j({open:!0,message:"No Ordinance Found.",severity:"error"})}finally{A(!1)}},P=l.useMemo(()=>a.filter(o=>{var O,T,E;const t=c.toLowerCase(),r=((O=o.title)==null?void 0:O.toLowerCase().includes(t))||((T=o.number)==null?void 0:T.toString().toLowerCase().includes(t)),b=(E=o.coverage_scopes)==null?void 0:E.some(N=>["indicators_of_success","monitoring_frequency","compliance_rate","challenges","violations_reports","feedback_mechanisms"].some(W=>N[W]&&N[W].toLowerCase().includes(t)));return r||b}),[a,c]),R=(o,t)=>{M({id:(t==null?void 0:t.id)||"",ordinance_id:o.id,compliance_rate:(t==null?void 0:t.compliance_rate)||"0.00",indicators_of_success:(t==null?void 0:t.indicators_of_success)||"",monitoring_frequency:(t==null?void 0:t.monitoring_frequency)||"Monthly",challenges:(t==null?void 0:t.challenges)||"",violations_reports:(t==null?void 0:t.violations_reports)||"",feedback_mechanisms:(t==null?void 0:t.feedback_mechanisms)||""}),f(!0)},m=o=>{M({...n,[o.target.name]:o.target.value})},S=async()=>{try{n.id?(await Yt(n.id,n),alert("Monitoring Data updated successfully!")):(await Kt(n),alert("Monitoring Data added successfully!")),f(!1),A(!0),x()}catch(o){j({open:!0,message:"Failed to save Monitoring Data. Please try again.",severity:"error"}),console.error("Error saving Monitoring Data:",o)}},w=o=>p(o.target.value),I=(o,t)=>h(t),F=o=>{_(parseInt(o.target.value,10)),h(0)};return y?e.jsx(se,{}):e.jsxs("div",{children:[e.jsx(C,{label:"Search Record",variant:"outlined",margin:"normal",value:c,onChange:w}),e.jsx(oe,{children:e.jsxs(ie,{children:[e.jsx(le,{children:e.jsxs($,{children:[e.jsx(i,{children:"Title"}),e.jsx(i,{children:"Indicators of Success"}),e.jsx(i,{children:"Frequency"}),e.jsx(i,{children:"Compliance Rate"}),e.jsx(i,{children:"Challenges"}),e.jsx(i,{children:"Violations"}),e.jsx(i,{children:"Feedback"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(ce,{children:P.slice(u*d,u*d+d).flatMap(o=>o.monitoring_compliance.length>0?o.monitoring_compliance.map(t=>e.jsxs($,{children:[e.jsxs(i,{children:[o.title," ",o.number]}),console.log(t),e.jsx(i,{children:t.indicators_of_success||"No Monitoring data added"}),e.jsx(i,{children:t.monitoring_frequency}),e.jsx(i,{children:`${t.compliance_rate}%`}),e.jsx(i,{children:t.challenges}),e.jsx(i,{children:t.violations_reports}),e.jsx(i,{children:t.feedback_mechanisms}),e.jsx(i,{children:e.jsx(L,{variant:"outlined",onClick:()=>R(o,t),children:"Edit"})})]},`${o.id}-${t.id}`)):e.jsxs($,{children:[e.jsxs(i,{children:[o.title," ",o.number]}),e.jsx(i,{colSpan:6,children:"No Monitoring Data"}),e.jsx(i,{children:e.jsx(L,{variant:"contained",onClick:()=>R(o,null),children:"Add"})})]},o.id))})]})}),e.jsx(B,{sx:{position:"absolute",bottom:0,right:0},children:e.jsx(te,{rowsPerPageOptions:[10,20,100],component:"div",count:P.length,rowsPerPage:d,page:u,onPageChange:I,onRowsPerPageChange:F})}),e.jsxs(de,{open:D,onClose:()=>f(!1),children:[e.jsxs(ue,{children:[n!=null&&n.id?"Edit":"Add"," Monitoring Data"]}),e.jsxs(pe,{children:[e.jsx(C,{label:"Indicators of Success",name:"indicators_of_success",value:(n==null?void 0:n.indicators_of_success)||"",onChange:m,fullWidth:!0,margin:"normal"}),e.jsxs(C,{label:"Monitoring Frequency",name:"monitoring_frequency",select:!0,value:(n==null?void 0:n.monitoring_frequency)||"",onChange:m,fullWidth:!0,margin:"normal",children:[e.jsx(U,{value:"Monthly",children:"Monthly"}),e.jsx(U,{value:"Quarterly",children:"Quarterly"}),e.jsx(U,{value:"Yearly",children:"Yearly"})]}),e.jsx(C,{label:"Compliance Rate",name:"compliance_rate",type:"number",value:(n==null?void 0:n.compliance_rate)||"",onChange:o=>{const t=o.target.value;/^\d*\.?\d*$/.test(t)&&m(o)},inputProps:{step:"0.01",min:"0"},fullWidth:!0,margin:"normal"}),e.jsx(C,{label:"Challenges",name:"challenges",value:(n==null?void 0:n.challenges)||"",onChange:m,fullWidth:!0,margin:"normal"}),e.jsx(C,{label:"Violations",name:"violations_reports",value:(n==null?void 0:n.violations_reports)||"",onChange:m,fullWidth:!0,margin:"normal"}),e.jsx(C,{label:"Feedback Mechanisms",name:"feedback_mechanisms",value:(n==null?void 0:n.feedback_mechanisms)||"",onChange:m,fullWidth:!0,margin:"normal"})]}),e.jsxs(ye,{children:[e.jsx(L,{onClick:()=>f(!1),children:"Cancel"}),e.jsx(L,{variant:"contained",onClick:S,children:"Save"})]})]}),e.jsx(ve,{open:v.open,autoHideDuration:4e3,onClose:()=>j({open:!1,message:"",severity:"info"}),children:e.jsx(we,{onClose:()=>j({open:!1,message:"",severity:"info"}),severity:v.severity,sx:{width:"100%"},children:v.message})})]})}function Wn(){const[a,s]=l.useState([]),[c,p]=l.useState(""),[u,h]=l.useState(0),[d,_]=l.useState(10),[y,A]=l.useState(!0),[v,j]=l.useState({open:!1,message:"",severity:"info"}),[D,f]=l.useState(!1),[n,M]=l.useState(null);l.useEffect(()=>{x()},[]);const x=async()=>{try{const o=await Xt();s(o||[])}catch{j({open:!0,message:"No Ordinance Found.",severity:"error"})}finally{A(!1)}},P=l.useMemo(()=>a.filter(o=>{var O,T,E;const t=c.toLowerCase(),r=((O=o.title)==null?void 0:O.toLowerCase().includes(t))||((T=o.number)==null?void 0:T.toString().toLowerCase().includes(t)),b=(E=o.impact_assessment)==null?void 0:E.some(N=>[].some(W=>N[W]&&N[W].toLowerCase().includes(t)));return r||b}),[a,c]),R=(o,t)=>{M({id:(t==null?void 0:t.id)||"",ordinance_id:o.id,funding_source:(t==null?void 0:t.funding_source)||"General Fund",outcomes_results:(t==null?void 0:t.outcomes_results)||"",gender_responsiveness_impact:(t==null?void 0:t.gender_responsiveness_impact)||"",community_benefits:(t==null?void 0:t.community_benefits)||"",adjustments_needed:(t==null?void 0:t.adjustments_needed)||"",feedback_mechanisms:(t==null?void 0:t.feedback_mechanisms)||""}),f(!0)},m=o=>{M({...n,[o.target.name]:o.target.value})},S=async()=>{try{n.id?(await Jt(n.id,n),alert("Monitoring Data updated successfully!")):(await Zt(n),alert("Monitoring Data added successfully!")),f(!1),A(!0),x()}catch(o){j({open:!0,message:"Failed to save Monitoring Data. Please try again.",severity:"error"}),console.error("Error saving Monitoring Data:",o)}},w=o=>p(o.target.value),I=(o,t)=>h(t),F=o=>{_(parseInt(o.target.value,10)),h(0)};return y?e.jsx(se,{}):e.jsxs("div",{children:[e.jsx(C,{label:"Search Record",variant:"outlined",margin:"normal",value:c,onChange:w}),e.jsx(oe,{children:e.jsxs(ie,{children:[e.jsx(le,{children:e.jsxs($,{children:[e.jsx(i,{children:"Title"}),e.jsx(i,{children:"Outcome Results"}),e.jsx(i,{children:"Gender Responsiveness Impact"}),e.jsx(i,{children:"Funding Source"}),e.jsx(i,{children:"Community Benefits"}),e.jsx(i,{children:"Adjustments Needed"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(ce,{children:P.slice(u*d,u*d+d).flatMap(o=>o.impact_assessment.length>0?o.impact_assessment.map(t=>e.jsxs($,{children:[e.jsxs(i,{children:[o.title," ",o.number]}),e.jsx(i,{children:t.outcomes_results||"No Assessment data added"}),e.jsx(i,{children:t.gender_responsiveness_impact}),e.jsx(i,{children:t.funding_source&&`${t.funding_source}%`}),e.jsx(i,{children:t.community_benefits}),e.jsx(i,{children:t.adjustments_needed}),e.jsx(i,{children:e.jsx(L,{variant:"outlined",onClick:()=>R(o,t),children:"Edit"})})]},`${o.id}-${t.id}`)):e.jsxs($,{children:[e.jsxs(i,{children:[o.title," ",o.number]}),e.jsx(i,{colSpan:5,children:"No Assessment Data"}),e.jsx(i,{children:e.jsx(L,{variant:"contained",onClick:()=>R(o,null),children:"Add"})})]},o.id))})]})}),e.jsx(B,{sx:{position:"absolute",bottom:0,right:0},children:e.jsx(te,{rowsPerPageOptions:[10,20,100],component:"div",count:P.length,rowsPerPage:d,page:u,onPageChange:I,onRowsPerPageChange:F})}),e.jsxs(de,{open:D,onClose:()=>f(!1),children:[e.jsxs(ue,{children:[n!=null&&n.id?"Edit":"Add"," Monitoring Data"]}),e.jsxs(pe,{children:[e.jsx(C,{label:"Outcome Results",name:"outcomes_results",value:(n==null?void 0:n.outcomes_results)||"",onChange:m,fullWidth:!0,margin:"normal"}),e.jsxs(C,{label:"Funding Source",name:"funding_source",select:!0,onChange:m,value:(n==null?void 0:n.funding_source)||"",fullWidth:!0,margin:"normal",children:[e.jsx(U,{value:"Monthly",children:"General Fund"}),e.jsx(U,{value:"Quarterly",children:"Grants"}),e.jsx(U,{value:"Yearly",children:"Others"})]}),e.jsx(C,{label:"Gender Responsiveness Impact",name:"gender_responsiveness_impact",value:(n==null?void 0:n.gender_responsiveness_impact)||"",onChange:m,fullWidth:!0,margin:"normal"}),e.jsx(C,{label:"Community Benefits",name:"community_benefits",value:(n==null?void 0:n.community_benefits)||"",onChange:m,fullWidth:!0,margin:"normal"}),e.jsx(C,{label:"Adjustments Needed",name:"adjustments_needed",value:(n==null?void 0:n.adjustments_needed)||"",onChange:m,fullWidth:!0,margin:"normal"}),e.jsx(C,{label:"Feedback Mechanisms",name:"feedback_mechanisms",value:(n==null?void 0:n.feedback_mechanisms)||"",onChange:m,fullWidth:!0,margin:"normal"})]}),e.jsxs(ye,{children:[e.jsx(L,{onClick:()=>f(!1),children:"Cancel"}),e.jsx(L,{variant:"contained",onClick:S,children:"Save"})]})]}),e.jsx(ve,{open:v.open,autoHideDuration:4e3,onClose:()=>j({open:!1,message:"",severity:"info"}),children:e.jsx(we,{onClose:()=>j({open:!1,message:"",severity:"info"}),severity:v.severity,sx:{width:"100%"},children:v.message})})]})}function $n(){const[a,s]=l.useState([]),[c,p]=l.useState([]),[u,h]=l.useState(0),[d,_]=l.useState(10),[y,A]=l.useState(""),[v,j]=l.useState(0),[D,f]=l.useState(!0),[n,M]=l.useState(null);l.useEffect(()=>{(async()=>{f(!0);try{const w=await tn();w&&Array.isArray(w)?(s(w),p(w)):M("Invalid data received.")}catch(w){console.error("Error fetching data:",w),M("Failed to fetch data.")}finally{f(!1)}})()},[]),l.useEffect(()=>{const S=a.filter(w=>{var I,F;return(F=(I=w.ordinance)==null?void 0:I.title)==null?void 0:F.toLowerCase().includes(y.toLowerCase())});p(S),h(0)},[y,a]);const x=c.slice(u*d,u*d+d),P=(S,w)=>{h(w)},R=S=>{_(parseInt(S.target.value,10)),h(0)},m=S=>{A(S.target.value)};return D?e.jsx(se,{sx:{m:2}}):n?e.jsx(ee,{color:"error",sx:{mt:2},children:n}):a.length?e.jsxs("div",{children:[e.jsx(C,{label:"Search by Ordinance Title",variant:"outlined",value:y,onChange:m,margin:"normal"}),e.jsx(B,{sx:{height:"500px",overflowY:"auto"},children:x.map((S,w)=>{var I;return e.jsxs(en,{sx:{backgroundColor:"#fafafa"},expanded:v===w,onChange:()=>j(v===w?null:w),children:[e.jsx(bn,{expandIcon:e.jsx(On,{}),children:e.jsxs(ee,{fontWeight:"bold",children:["ðŸ§¾ ",((I=S.ordinance)==null?void 0:I.title)||"Untitled Ordinance"]})}),e.jsx(hn,{children:e.jsxs(B,{ml:2,children:[e.jsx(ne,{title:"ðŸ“Œ Ordinance Details",data:S.ordinance}),e.jsx(ne,{title:"ðŸŽ¯ Objectives",data:S.objectives}),e.jsx(ne,{title:"ðŸ“Š Monitoring",data:S.monitoring}),e.jsx(ne,{title:"ðŸ“ˆ Impact Assessment",data:S.assessment}),e.jsx(ne,{title:"ðŸ—ºï¸ Coverage Scope",data:S.coverage}),e.jsx(ne,{title:"ðŸ’° Budget Allocation",data:S.budget})]})})]},w)})}),e.jsx(B,{sx:{position:"absolute",bottom:0,right:0},children:e.jsx(te,{component:"div",count:c.length,page:u,onPageChange:P,rowsPerPage:d,onRowsPerPageChange:R,rowsPerPageOptions:[10,20,100]})})]}):e.jsx(ee,{variant:"body2",sx:{mt:2},children:"No records found."})}const ne=({title:a,data:s,isArray:c=!1})=>{if(!s||Array.isArray(s)&&s.length===0)return null;const p=h=>Object.entries(h).filter(([d,_])=>!["id","ordinance_id","file_path"].includes(d)&&_!==null&&_!==void 0&&_!=="");if(c){const h=s.map(p).filter(d=>d.length>0);return h.length===0?null:e.jsxs(B,{mt:2,width:"1000px",children:[e.jsx(ee,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:a}),h.map((d,_)=>e.jsx(B,{p:2,mb:1,sx:{border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#f9f9f9",overflowX:"auto"},children:d.map(([y,A])=>e.jsxs(ee,{variant:"body2",children:[e.jsxs("strong",{children:[ot(y),":"]})," ",String(A)]},y))},_))]})}const u=p(s);return u.length===0?null:e.jsxs(B,{mt:2,width:"1000px",children:[e.jsx(ee,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:a}),e.jsx(B,{p:2,sx:{border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#f9f9f9",overflowX:"auto"},children:u.map(([h,d])=>e.jsxs(ee,{variant:"body2",children:[e.jsxs("strong",{children:[ot(h),":"]})," ",String(d)]},h))})]})},ot=a=>a.replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase());function Kn(){const[a,s]=l.useState(0),c=(p,u)=>{s(u)};return e.jsxs(nn,{children:[e.jsxs(an,{value:a,onChange:c,children:[e.jsx(Z,{label:"All Records"}),e.jsx(Z,{label:"Records Table"}),e.jsx(Z,{label:"Coverage Table"}),e.jsx(Z,{label:"Objectives Table"}),e.jsx(Z,{label:"Budget Table"}),e.jsx(Z,{label:"Records Monitoring Table"}),e.jsx(Z,{label:"Impact Assessment Table"})]}),e.jsxs("div",{style:{marginTop:"30px"},children:[a===0&&e.jsx($n,{formType:"A"}),a===1&&e.jsx(In,{formType:"B"}),a===2&&e.jsx(kn,{formType:"C"}),a===3&&e.jsx(Ln,{formType:"D"}),a===4&&e.jsx(En,{formType:"E"}),a===5&&e.jsx(Fn,{formType:"F"}),a===6&&e.jsx(Wn,{formType:"G"})]})]})}export{Kn as default};
