import{c as he,d as ge,b as r,u as me,j as e,s as G,e as ne,h as xe,i as be,m as ae,k as Be,I as z,K as Ie,l as Le,n as a,o as je,p as H,q as ke,M as Q,S as Ae,t as De,B as U,v as p,w as T,A as Oe,x as J,y as X,z as Z,D as O,E as ee,F as Fe,G as q,H as K,J as fe,L as Y,N as Ee,O as Ne,C as ie,P as We,Q as $e,R as Ge,U as ze,V as Qe,W as He,X as Ue,Y as qe,Z as Ke,_ as Ye,$ as Ve,a0 as Je,a1 as Xe,a2 as Ze,a3 as et,a4 as tt,a5 as V}from"./index-Db6h9J6c.js";import{E as nt,S as re,A as le}from"./EOForms-Cjt4tn9_.js";function st(i){return he("MuiDialogActions",i)}ge("MuiDialogActions",["root","spacing"]);const at=i=>{const{classes:l,disableSpacing:c}=i;return xe({root:["root",!c&&"spacing"]},st,l)},it=G("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(i,l)=>{const{ownerState:c}=i;return[l.root,!c.disableSpacing&&l.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:i})=>!i.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),oe=r.forwardRef(function(l,c){const y=me({props:l,name:"MuiDialogActions"}),{className:m,disableSpacing:_=!1,...d}=y,C={...y,disableSpacing:_},v=at(C);return e.jsx(it,{className:ne(v.root,m),ownerState:C,ref:c,...d})}),rt=be(e.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),lt=be(e.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage");function ot(i){return he("MuiToolbar",i)}ge("MuiToolbar",["root","gutters","regular","dense"]);const ct=i=>{const{classes:l,disableGutters:c,variant:y}=i;return xe({root:["root",!c&&"gutters",y]},ot,l)},dt=G("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(i,l)=>{const{ownerState:c}=i;return[l.root,!c.disableGutters&&l.gutters,l[c.variant]]}})(ae(({theme:i})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:l})=>!l.disableGutters,style:{paddingLeft:i.spacing(2),paddingRight:i.spacing(2),[i.breakpoints.up("sm")]:{paddingLeft:i.spacing(3),paddingRight:i.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:i.mixins.toolbar}]}))),ut=r.forwardRef(function(l,c){const y=me({props:l,name:"MuiToolbar"}),{className:m,component:_="div",disableGutters:d=!1,variant:C="regular",...v}=y,g={...y,component:_,disableGutters:d,variant:C},f=ct(g);return e.jsx(dt,{as:_,className:ne(f.root,m),ref:c,ownerState:g,...v})}),ht=r.forwardRef(function(l,c){const{backIconButtonProps:y,count:m,disabled:_=!1,getItemAriaLabel:d,nextIconButtonProps:C,onPageChange:v,page:g,rowsPerPage:f,showFirstButton:b,showLastButton:E,slots:h={},slotProps:n={},...w}=l,x=Be(),P=W=>{v(W,0)},M=W=>{v(W,g-1)},j=W=>{v(W,g+1)},F=W=>{v(W,Math.max(0,Math.ceil(m/f)-1))},u=h.firstButton??z,S=h.lastButton??z,L=h.nextButton??z,s=h.previousButton??z,t=h.firstButtonIcon??rt,o=h.lastButtonIcon??lt,R=h.nextButtonIcon??Ie,k=h.previousButtonIcon??Le,B=x?S:u,A=x?L:s,I=x?s:L,D=x?u:S,N=x?n.lastButton:n.firstButton,ce=x?n.nextButton:n.previousButton,de=x?n.previousButton:n.nextButton,ue=x?n.firstButton:n.lastButton;return e.jsxs("div",{ref:c,...w,children:[b&&e.jsx(B,{onClick:P,disabled:_||g===0,"aria-label":d("first",g),title:d("first",g),...N,children:x?e.jsx(o,{...n.lastButtonIcon}):e.jsx(t,{...n.firstButtonIcon})}),e.jsx(A,{onClick:M,disabled:_||g===0,color:"inherit","aria-label":d("previous",g),title:d("previous",g),...ce??y,children:x?e.jsx(R,{...n.nextButtonIcon}):e.jsx(k,{...n.previousButtonIcon})}),e.jsx(I,{onClick:j,disabled:_||(m!==-1?g>=Math.ceil(m/f)-1:!1),color:"inherit","aria-label":d("next",g),title:d("next",g),...de??C,children:x?e.jsx(k,{...n.previousButtonIcon}):e.jsx(R,{...n.nextButtonIcon})}),E&&e.jsx(D,{onClick:F,disabled:_||g>=Math.ceil(m/f)-1,"aria-label":d("last",g),title:d("last",g),...ue,children:x?e.jsx(t,{...n.firstButtonIcon}):e.jsx(o,{...n.lastButtonIcon})})]})});function gt(i){return he("MuiTablePagination",i)}const se=ge("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]);var ve;const mt=G(a,{name:"MuiTablePagination",slot:"Root",overridesResolver:(i,l)=>l.root})(ae(({theme:i})=>({overflow:"auto",color:(i.vars||i).palette.text.primary,fontSize:i.typography.pxToRem(14),"&:last-child":{padding:0}}))),xt=G(ut,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(i,l)=>({[`& .${se.actions}`]:l.actions,...l.toolbar})})(ae(({theme:i})=>({minHeight:52,paddingRight:2,[`${i.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[i.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${se.actions}`]:{flexShrink:0,marginLeft:20}}))),jt=G("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(i,l)=>l.spacer})({flex:"1 1 100%"}),ft=G("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(i,l)=>l.selectLabel})(ae(({theme:i})=>({...i.typography.body2,flexShrink:0}))),vt=G(Ae,{name:"MuiTablePagination",slot:"Select",overridesResolver:(i,l)=>({[`& .${se.selectIcon}`]:l.selectIcon,[`& .${se.select}`]:l.select,...l.input,...l.selectRoot})})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${se.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),bt=G(Q,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(i,l)=>l.menuItem})({}),pt=G("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(i,l)=>l.displayedRows})(ae(({theme:i})=>({...i.typography.body2,flexShrink:0})));function yt({from:i,to:l,count:c}){return`${i}–${l} of ${c!==-1?c:`more than ${l}`}`}function _t(i){return`Go to ${i} page`}const St=i=>{const{classes:l}=i;return xe({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},gt,l)},te=r.forwardRef(function(l,c){const y=me({props:l,name:"MuiTablePagination"}),{ActionsComponent:m=ht,backIconButtonProps:_,colSpan:d,component:C=a,count:v,disabled:g=!1,getItemAriaLabel:f=_t,labelDisplayedRows:b=yt,labelRowsPerPage:E="Rows per page:",nextIconButtonProps:h,onPageChange:n,onRowsPerPageChange:w,page:x,rowsPerPage:P,rowsPerPageOptions:M=[10,25,50,100],SelectProps:j={},showFirstButton:F=!1,showLastButton:u=!1,slotProps:S={},slots:L={},...s}=y,t=y,o=St(t),R=(S==null?void 0:S.select)??j,k=R.native?"option":bt;let B;(C===a||C==="td")&&(B=d||1e3);const A=je(R.id),I=je(R.labelId),D=()=>v===-1?(x+1)*P:P===-1?v:Math.min(v,(x+1)*P),N={slots:L,slotProps:S},[ce,de]=H("root",{ref:c,className:o.root,elementType:mt,externalForwardedProps:{...N,component:C,...s},ownerState:t,additionalProps:{colSpan:B}}),[ue,W]=H("toolbar",{className:o.toolbar,elementType:xt,externalForwardedProps:N,ownerState:t}),[pe,ye]=H("spacer",{className:o.spacer,elementType:jt,externalForwardedProps:N,ownerState:t}),[_e,Se]=H("selectLabel",{className:o.selectLabel,elementType:ft,externalForwardedProps:N,ownerState:t,additionalProps:{id:I}}),[Pe,Ce]=H("select",{className:o.select,elementType:vt,externalForwardedProps:N,ownerState:t}),[we,Me]=H("menuItem",{className:o.menuItem,elementType:k,externalForwardedProps:N,ownerState:t}),[Re,Te]=H("displayedRows",{className:o.displayedRows,elementType:pt,externalForwardedProps:N,ownerState:t});return e.jsx(ce,{...de,children:e.jsxs(ue,{...W,children:[e.jsx(pe,{...ye}),M.length>1&&e.jsx(_e,{...Se,children:E}),M.length>1&&e.jsx(Pe,{variant:"standard",...!R.variant&&{input:ve||(ve=e.jsx(ke,{}))},value:P,onChange:w,id:A,labelId:I,...R,classes:{...R.classes,root:ne(o.input,o.selectRoot,(R.classes||{}).root),select:ne(o.select,(R.classes||{}).select),icon:ne(o.selectIcon,(R.classes||{}).icon)},disabled:g,...Ce,children:M.map($=>r.createElement(we,{...Me,key:$.label?$.label:$,value:$.value?$.value:$},$.label?$.label:$))}),e.jsx(Re,{...Te,children:b({from:v===0?0:x*P+1,to:D(),count:v===-1?-1:v,page:x})}),e.jsx(m,{className:o.actions,backIconButtonProps:_,count:v,nextIconButtonProps:h,onPageChange:n,page:x,rowsPerPage:P,showFirstButton:F,showLastButton:u,slotProps:S.actions,slots:L.actions,getItemAriaLabel:f,disabled:g})]})})}),Pt=()=>{const[i,l]=r.useState([]),[c,y]=r.useState(!1),[m,_]=r.useState(""),[d,C]=r.useState(""),[v,g]=r.useState(0),[f,b]=r.useState(10),[E,h]=r.useState(!1),n=u=>new Date(u).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"});r.useEffect(()=>{w()},[]);const w=async()=>{try{const u=await De();l(u)}catch(u){console.error("Error fetching ordinances:",u)}},x=async u=>{if(window.confirm("Are you sure you want to delete this ordinance?"))try{await Ee(u),w()}catch(S){console.error("Error deleting ordinance:",S),alert("Failed to delete the ordinance.")}},P=u=>{C(u.target.value)},M=(u,S)=>{g(S)},j=u=>{b(parseInt(u.target.value,10)),g(0)},F=i.filter(u=>Object.entries(u).filter(([S])=>S!=="file_path").some(([S,L])=>L&&L.toString().toLowerCase().includes(d.toLowerCase())));return e.jsxs("div",{children:[e.jsxs(U,{display:"flex",justifyContent:"space-between",children:[e.jsx(p,{label:"Search Record",variant:"outlined",margin:"normal",value:d,onChange:P}),e.jsx(T,{sx:{height:"3rem",backgroundColor:"var(--eminence)"},variant:"contained",startIcon:e.jsx(Oe,{}),onClick:()=>h(!0),children:"Add Record"})]}),e.jsx(J,{children:e.jsxs(X,{stickyHeader:!0,size:"medium",children:[e.jsx(Z,{children:e.jsxs(O,{children:[e.jsx(a,{children:"Title"}),e.jsx(a,{children:"Type of Document"}),e.jsx(a,{children:"Number"}),e.jsx(a,{children:"Details"}),e.jsx(a,{children:"Date Issued"}),e.jsx(a,{children:"Date of Effectivity"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(ee,{children:F.slice(v*f,v*f+f).map(u=>e.jsxs(O,{hover:!0,children:[console.log(u),e.jsx(a,{children:u.title}),e.jsx(a,{children:u.document_type}),e.jsx(a,{children:u.number}),e.jsx(a,{children:u.details}),e.jsx(a,{children:n(u.date_issued)}),e.jsx(a,{children:n(u.date_effectivity)}),e.jsx(a,{children:u.status}),e.jsxs(a,{children:[u.file_path&&e.jsx(z,{onClick:()=>Fe(u.file_path,_,y),children:e.jsx("img",{src:"/Printer.svg",alt:"preview"})}),e.jsx(z,{onClick:()=>x(u.id),color:"error",children:e.jsx("img",{src:"/trash.svg",alt:"delete"})})]})]},u.id))})]})}),e.jsx(U,{sx:{position:"absolute",bottom:0,right:0},children:e.jsx(te,{rowsPerPageOptions:[10,20,100],component:"div",count:F.length,rowsPerPage:f,page:v,onPageChange:M,onRowsPerPageChange:j})}),e.jsxs(q,{open:E,onClose:()=>h(!1),maxWidth:"md",fullWidth:!0,children:[e.jsxs(K,{children:["Add Ordinance",e.jsx(z,{onClick:()=>h(!1),style:{float:"right"},children:e.jsx(fe,{})})]}),e.jsx(Y,{dividers:!0,children:e.jsx(nt,{onClose:()=>h(!1),refreshData:w})})]}),e.jsxs(q,{open:c,onClose:()=>y(!1),maxWidth:"lg",fullWidth:!0,children:[e.jsxs(K,{children:["Preview Records",e.jsx(z,{onClick:()=>y(!1),style:{float:"right"},children:e.jsx(fe,{})})]}),e.jsx(Y,{dividers:!0,children:m?e.jsx("iframe",{src:m,width:"100%",height:"600px",title:"Ordinance Preview",style:{border:"none"}}):e.jsx("p",{children:"No file selected."})})]})]})};function Ct(){const[i,l]=r.useState([]),[c,y]=r.useState(""),[m,_]=r.useState(0),[d,C]=r.useState(10),[v,g]=r.useState(!0),[f,b]=r.useState({open:!1,message:"",severity:"info"}),[E,h]=r.useState(!1),[n,w]=r.useState(null);r.useEffect(()=>{x()},[]);const x=async()=>{try{const s=await Ne();l(s||[])}catch{b({open:!0,message:"No Ordinance Found.",severity:"error"})}finally{g(!1)}},P=r.useMemo(()=>i.filter(s=>{var k,B,A;const t=c.toLowerCase(),o=((k=s.title)==null?void 0:k.toLowerCase().includes(t))||((B=s.number)==null?void 0:B.toString().toLowerCase().includes(t)),R=(A=s.coverage_scopes)==null?void 0:A.some(I=>["target_beneficiaries","geographical_coverage","inclusive_period"].some(D=>I[D]&&I[D].toLowerCase().includes(t)));return o||R}),[i,c]),M=(s,t)=>{w({id:(t==null?void 0:t.id)||"",ordinance_id:s.id,inclusive_period:(t==null?void 0:t.inclusive_period)||"",target_beneficiaries:(t==null?void 0:t.target_beneficiaries)||"General Public",geographical_coverage:(t==null?void 0:t.geographical_coverage)||""}),h(!0)},j=s=>{w({...n,[s.target.name]:s.target.value})},F=async()=>{try{n.id?(await We(n.id,n),alert("Coverage scope updated successfully!")):(await $e(n),alert("Coverage scope added successfully!")),h(!1),g(!0),x()}catch(s){b({open:!0,message:"Failed to save coverage scope. Please try again.",severity:"error"}),console.error("Error saving coverage scope:",s)}},u=s=>y(s.target.value),S=(s,t)=>_(t),L=s=>{C(parseInt(s.target.value,10)),_(0)};return v?e.jsx(ie,{}):e.jsxs("div",{children:[e.jsx(p,{label:"Search Record",variant:"outlined",margin:"normal",value:c,onChange:u}),e.jsx(J,{children:e.jsxs(X,{children:[e.jsx(Z,{children:e.jsxs(O,{children:[e.jsx(a,{children:"Title"}),e.jsx(a,{children:"Inclusive Period"}),e.jsx(a,{children:"Target Beneficiaries"}),e.jsx(a,{children:"Geographical Coverage"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(ee,{children:P.slice(m*d,m*d+d).flatMap(s=>s.coverage_scopes.length>0?s.coverage_scopes.map(t=>e.jsxs(O,{children:[e.jsxs(a,{children:[s.title," ",s.number]}),e.jsx(a,{children:t.inclusive_period}),e.jsx(a,{children:t.target_beneficiaries}),e.jsx(a,{children:t.geographical_coverage}),e.jsx(a,{children:e.jsx(T,{variant:"outlined",onClick:()=>M(s,t),children:"Edit"})})]},`${s.id}-${t.id}`)):e.jsxs(O,{children:[e.jsxs(a,{children:[s.title," ",s.number]}),e.jsx(a,{colSpan:3,children:"No coverage scope available"}),e.jsx(a,{children:e.jsx(T,{variant:"contained",onClick:()=>M(s,null),children:"Add"})})]},s.id))})]})}),e.jsx(U,{sx:{position:"absolute",bottom:0,right:0},children:e.jsx(te,{rowsPerPageOptions:[10,20,100],component:"div",count:P.length,rowsPerPage:d,page:m,onPageChange:S,onRowsPerPageChange:L})}),e.jsxs(q,{open:E,onClose:()=>h(!1),children:[e.jsxs(K,{children:[n!=null&&n.id?"Edit":"Add"," Coverage Scope"]}),e.jsxs(Y,{children:[e.jsx(p,{label:"Inclusive Period",name:"inclusive_period",value:(n==null?void 0:n.inclusive_period)||"",onChange:j,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Target Beneficiaries",name:"target_beneficiaries",value:(n==null?void 0:n.target_beneficiaries)||"General Public",onChange:j,select:!0,fullWidth:!0,margin:"normal",children:["General Public","Women","Children","Solo Parents","PWDs","MSMEs","Others"].map(s=>e.jsx(Q,{value:s,children:s},s))}),e.jsx(p,{label:"Geographical Coverage",name:"geographical_coverage",value:(n==null?void 0:n.geographical_coverage)||"",onChange:j,fullWidth:!0,margin:"normal"})]}),e.jsxs(oe,{children:[e.jsx(T,{onClick:()=>h(!1),children:"Cancel"}),e.jsx(T,{variant:"contained",onClick:F,children:"Save"})]})]}),e.jsx(re,{open:f.open,autoHideDuration:4e3,onClose:()=>b({open:!1,message:"",severity:"info"}),children:e.jsx(le,{onClose:()=>b({open:!1,message:"",severity:"info"}),severity:f.severity,sx:{width:"100%"},children:f.message})})]})}function wt(){const[i,l]=r.useState([]),[c,y]=r.useState(""),[m,_]=r.useState(0),[d,C]=r.useState(10),[v,g]=r.useState(!0),[f,b]=r.useState({open:!1,message:"",severity:"info"}),[E,h]=r.useState(!1),[n,w]=r.useState(null);r.useEffect(()=>{x()},[]);const x=async()=>{try{const s=await Ge();l(s||[])}catch{b({open:!0,message:"No Ordinance Found.",severity:"error"})}finally{g(!1)}},P=r.useMemo(()=>i.filter(s=>{var k,B,A;const t=c.toLowerCase(),o=((k=s.title)==null?void 0:k.toLowerCase().includes(t))||((B=s.number)==null?void 0:B.toString().toLowerCase().includes(t)),R=(A=s.coverage_scopes)==null?void 0:A.some(I=>["lead_agency","supporting_agencies","policy_objectives","key_provisions","programs_activities"].some(D=>I[D]&&I[D].toLowerCase().includes(t)));return o||R}),[i,c]),M=(s,t)=>{w({id:(t==null?void 0:t.id)||"",ordinance_id:s.id,policy_objectives:(t==null?void 0:t.policy_objectives)||"",lead_agency:(t==null?void 0:t.lead_agency)||"",supporting_agencies:(t==null?void 0:t.supporting_agencies)||"",key_provisions:(t==null?void 0:t.key_provisions)||"",programs_activities:(t==null?void 0:t.programs_activities)||""}),h(!0)},j=s=>{w({...n,[s.target.name]:s.target.value})},F=async()=>{try{n.id?(await ze(n.id,n),alert("Coverage scope updated successfully!")):(await Qe(n),alert("Coverage scope added successfully!")),h(!1),g(!0),x()}catch(s){b({open:!0,message:"Failed to save coverage scope. Please try again.",severity:"error"}),console.error("Error saving coverage scope:",s)}},u=s=>y(s.target.value),S=(s,t)=>_(t),L=s=>{C(parseInt(s.target.value,10)),_(0)};return v?e.jsx(ie,{}):e.jsxs("div",{children:[e.jsx(p,{label:"Search Record",variant:"outlined",margin:"normal",value:c,onChange:u}),e.jsx(J,{children:e.jsxs(X,{children:[e.jsx(Z,{children:e.jsxs(O,{children:[e.jsx(a,{children:"Title"}),e.jsx(a,{children:"Policy Objectives"}),e.jsx(a,{children:"Lead Agency"}),e.jsx(a,{children:"Supporting Agencies"}),e.jsx(a,{children:"Key Provisions"}),e.jsx(a,{children:"Programs/Activities"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(ee,{children:P.slice(m*d,m*d+d).flatMap(s=>s.objectives_implementation.length>0?s.objectives_implementation.map(t=>e.jsxs(O,{children:[e.jsxs(a,{children:[s.title," ",s.number]}),console.log(t),e.jsx(a,{children:t.policy_objectives||" "}),e.jsx(a,{children:t.lead_agency||" "}),e.jsx(a,{children:t.supporting_agencies||" "}),e.jsx(a,{children:t.key_provisions||" "}),e.jsx(a,{children:t.programs_activities||" "}),e.jsx(a,{children:e.jsx(T,{variant:"outlined",onClick:()=>M(s,t),children:"Edit"})})]},`${s.id}-${t.id}`)):e.jsxs(O,{children:[e.jsxs(a,{children:[s.title," ",s.number]}),e.jsx(a,{colSpan:5,children:"No Objectives/Implementation"}),e.jsx(a,{children:e.jsx(T,{variant:"contained",onClick:()=>M(s,null),children:"Add"})})]},s.id))})]})}),e.jsx(U,{sx:{position:"absolute",bottom:0,right:0},children:e.jsx(te,{rowsPerPageOptions:[10,20,100],component:"div",count:P.length,rowsPerPage:d,page:m,onPageChange:S,onRowsPerPageChange:L})}),e.jsxs(q,{open:E,onClose:()=>h(!1),children:[e.jsxs(K,{children:[n!=null&&n.id?"Edit":"Add"," Coverage Scope"]}),e.jsxs(Y,{children:[e.jsx(p,{label:"Policy Objectives",name:"policy_objectives",value:(n==null?void 0:n.policy_objectives)||"",onChange:j,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Lead Agency ",name:"lead_agency",value:(n==null?void 0:n.lead_agency)||"",onChange:j,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Supporting Agencies",name:"supporting_agencies",value:(n==null?void 0:n.supporting_agencies)||"",onChange:j,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Key Provisions",name:"key_provisions",value:(n==null?void 0:n.key_provisions)||"",onChange:j,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Programs Activities",name:"programs_activities",value:(n==null?void 0:n.programs_activities)||"",onChange:j,fullWidth:!0,margin:"normal"})]}),e.jsxs(oe,{children:[e.jsx(T,{onClick:()=>h(!1),children:"Cancel"}),e.jsx(T,{variant:"contained",onClick:F,children:"Save"})]})]}),e.jsx(re,{open:f.open,autoHideDuration:4e3,onClose:()=>b({open:!1,message:"",severity:"info"}),children:e.jsx(le,{onClose:()=>b({open:!1,message:"",severity:"info"}),severity:f.severity,sx:{width:"100%"},children:f.message})})]})}function Mt(){const[i,l]=r.useState([]),[c,y]=r.useState(""),[m,_]=r.useState(0),[d,C]=r.useState(10),[v,g]=r.useState(!0),[f,b]=r.useState({open:!1,message:"",severity:"info"}),[E,h]=r.useState(!1),[n,w]=r.useState(null);r.useEffect(()=>{x()},[]);const x=async()=>{try{const t=await He();l(t||[])}catch{b({open:!0,message:"No Ordinance Found.",severity:"error"})}finally{g(!1)}},P=r.useMemo(()=>i.filter(t=>{var B,A,I;const o=c.toLowerCase(),R=((B=t.title)==null?void 0:B.toLowerCase().includes(o))||((A=t.number)==null?void 0:A.toString().toLowerCase().includes(o)),k=(I=t.budget_allocation)==null?void 0:I.some(D=>["allocated_budget","utilized_budget","gad_budget","financial_transparency_measures"].some(N=>D[N]&&D[N].toLowerCase().includes(o)));return R||k}),[i,c]),M=(t,o)=>{w({id:(o==null?void 0:o.id)||"",ordinance_id:t.id,allocated_budget:(o==null?void 0:o.allocated_budget)||"",utilized_budget:(o==null?void 0:o.utilized_budget)||"",gad_budget:(o==null?void 0:o.gad_budget)||"",financial_transparency_measures:(o==null?void 0:o.financial_transparency_measures)||""}),h(!0)},j=t=>{w({...n,[t.target.name]:t.target.value})},F=async()=>{try{n.id?(await Ue(n.id,n),alert("Coverage scope updated successfully!")):(await qe(n),alert("Coverage scope added successfully!")),h(!1),g(!0),x()}catch(t){b({open:!0,message:"Failed to save coverage scope. Please try again.",severity:"error"}),console.error("Error saving coverage scope:",t)}},u=t=>y(t.target.value),S=(t,o)=>_(o),L=t=>{C(parseInt(t.target.value,10)),_(0)};if(v)return e.jsx(ie,{});const s=t=>!t||isNaN(t)?"₱0.00":new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(t);return e.jsxs("div",{children:[e.jsx(p,{label:"Search Record",variant:"outlined",margin:"normal",value:c,onChange:u}),e.jsx(J,{children:e.jsxs(X,{children:[e.jsx(Z,{children:e.jsxs(O,{children:[e.jsx(a,{children:"Title"}),e.jsx(a,{children:"Allocated Budget"}),e.jsx(a,{children:"Utilized Budget"}),e.jsx(a,{children:"GAD Budget"}),e.jsx(a,{children:"Financial Transparency Measures"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(ee,{children:P.slice(m*d,m*d+d).flatMap(t=>t.budget_allocation.length>0?t.budget_allocation.map(o=>e.jsxs(O,{children:[e.jsxs(a,{children:[t.title," ",t.number]}),e.jsx(a,{children:s(o.allocated_budget)}),e.jsx(a,{children:s(o.utilized_budget)}),e.jsx(a,{children:s(o.gad_budget)}),e.jsx(a,{children:o.financial_transparency_measures}),e.jsx(a,{children:e.jsx(T,{variant:"outlined",onClick:()=>M(t,o),children:"Edit"})})]},`${t.id}-${o.id}`)):e.jsxs(O,{children:[e.jsxs(a,{children:[t.title," ",t.number]}),e.jsx(a,{colSpan:4,children:"No Budget Allocation Data"}),e.jsx(a,{children:e.jsx(T,{variant:"contained",onClick:()=>M(t,null),children:"Add"})})]},t.id))})]})}),e.jsx(U,{sx:{position:"absolute",bottom:0,right:0},children:e.jsx(te,{rowsPerPageOptions:[10,20,100],component:"div",count:P.length,rowsPerPage:d,page:m,onPageChange:S,onRowsPerPageChange:L})}),e.jsxs(q,{open:E,onClose:()=>h(!1),children:[e.jsxs(K,{children:[n!=null&&n.id?"Edit":"Add"," Coverage Scope"]}),e.jsxs(Y,{children:[e.jsx(p,{label:"Allocated Budget",name:"allocated_budget",type:"number",value:(n==null?void 0:n.allocated_budget)||"",onChange:j,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Utilized Budget",type:"number",name:"utilized_budget",value:(n==null?void 0:n.utilized_budget)||"",onChange:j,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"GAD Budget",type:"number",name:"gad_budget",value:(n==null?void 0:n.gad_budget)||"",onChange:j,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Financial Transparency Measures",name:"financial_transparency_measures",value:(n==null?void 0:n.financial_transparency_measures)||"",onChange:j,fullWidth:!0,margin:"normal"})]}),e.jsxs(oe,{children:[e.jsx(T,{onClick:()=>h(!1),children:"Cancel"}),e.jsx(T,{variant:"contained",onClick:F,children:"Save"})]})]}),e.jsx(re,{open:f.open,autoHideDuration:4e3,onClose:()=>b({open:!1,message:"",severity:"info"}),children:e.jsx(le,{onClose:()=>b({open:!1,message:"",severity:"info"}),severity:f.severity,sx:{width:"100%"},children:f.message})})]})}function Rt(){const[i,l]=r.useState([]),[c,y]=r.useState(""),[m,_]=r.useState(0),[d,C]=r.useState(10),[v,g]=r.useState(!0),[f,b]=r.useState({open:!1,message:"",severity:"info"}),[E,h]=r.useState(!1),[n,w]=r.useState(null);r.useEffect(()=>{x()},[]);const x=async()=>{try{const s=await Ke();l(s||[])}catch{b({open:!0,message:"No Ordinance Found.",severity:"error"})}finally{g(!1)}},P=r.useMemo(()=>i.filter(s=>{var k,B,A;const t=c.toLowerCase(),o=((k=s.title)==null?void 0:k.toLowerCase().includes(t))||((B=s.number)==null?void 0:B.toString().toLowerCase().includes(t)),R=(A=s.coverage_scopes)==null?void 0:A.some(I=>["indicators_of_success","monitoring_frequency","compliance_rate","challenges","violations_reports","feedback_mechanisms"].some(D=>I[D]&&I[D].toLowerCase().includes(t)));return o||R}),[i,c]),M=(s,t)=>{w({id:(t==null?void 0:t.id)||"",ordinance_id:s.id,compliance_rate:(t==null?void 0:t.compliance_rate)||"0.00",indicators_of_success:(t==null?void 0:t.indicators_of_success)||"",monitoring_frequency:(t==null?void 0:t.monitoring_frequency)||"Monthly",challenges:(t==null?void 0:t.challenges)||"",violations_reports:(t==null?void 0:t.violations_reports)||"",feedback_mechanisms:(t==null?void 0:t.feedback_mechanisms)||""}),h(!0)},j=s=>{w({...n,[s.target.name]:s.target.value})},F=async()=>{try{n.id?(await Ye(n.id,n),alert("Monitoring Data updated successfully!")):(await Ve(n),alert("Monitoring Data added successfully!")),h(!1),g(!0),x()}catch(s){b({open:!0,message:"Failed to save Monitoring Data. Please try again.",severity:"error"}),console.error("Error saving Monitoring Data:",s)}},u=s=>y(s.target.value),S=(s,t)=>_(t),L=s=>{C(parseInt(s.target.value,10)),_(0)};return v?e.jsx(ie,{}):e.jsxs("div",{children:[e.jsx(p,{label:"Search Record",variant:"outlined",margin:"normal",value:c,onChange:u}),e.jsx(J,{children:e.jsxs(X,{children:[e.jsx(Z,{children:e.jsxs(O,{children:[e.jsx(a,{children:"Title"}),e.jsx(a,{children:"Indicators of Success"}),e.jsx(a,{children:"Frequency"}),e.jsx(a,{children:"Compliance Rate"}),e.jsx(a,{children:"Challenges"}),e.jsx(a,{children:"Violations"}),e.jsx(a,{children:"Feedback"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(ee,{children:P.slice(m*d,m*d+d).flatMap(s=>s.monitoring_compliance.length>0?s.monitoring_compliance.map(t=>e.jsxs(O,{children:[e.jsxs(a,{children:[s.title," ",s.number]}),console.log(t),e.jsx(a,{children:t.indicators_of_success}),e.jsx(a,{children:t.monitoring_frequency}),e.jsxs(a,{children:[t.compliance_rate,"%"]}),e.jsx(a,{children:t.challenges}),e.jsx(a,{children:t.violations_reports}),e.jsx(a,{children:t.feedback_mechanisms}),e.jsx(a,{children:e.jsx(T,{variant:"outlined",onClick:()=>M(s,t),children:"Edit"})})]},`${s.id}-${t.id}`)):e.jsxs(O,{children:[e.jsxs(a,{children:[s.title," ",s.number]}),e.jsx(a,{colSpan:6,children:"No Monitoring Data"}),e.jsx(a,{children:e.jsx(T,{variant:"contained",onClick:()=>M(s,null),children:"Add"})})]},s.id))})]})}),e.jsx(U,{sx:{position:"absolute",bottom:0,right:0},children:e.jsx(te,{rowsPerPageOptions:[10,20,100],component:"div",count:P.length,rowsPerPage:d,page:m,onPageChange:S,onRowsPerPageChange:L})}),e.jsxs(q,{open:E,onClose:()=>h(!1),children:[e.jsxs(K,{children:[n!=null&&n.id?"Edit":"Add"," Monitoring Data"]}),e.jsxs(Y,{children:[e.jsx(p,{label:"Indicators of Success",name:"indicators_of_success",value:(n==null?void 0:n.indicators_of_success)||"",onChange:j,fullWidth:!0,margin:"normal"}),e.jsxs(p,{label:"Monitoring Frequency",name:"monitoring_frequency",select:!0,value:(n==null?void 0:n.monitoring_frequency)||"",onChange:j,fullWidth:!0,margin:"normal",children:[e.jsx(Q,{value:"Monthly",children:"Monthly"}),e.jsx(Q,{value:"Quarterly",children:"Quarterly"}),e.jsx(Q,{value:"Yearly",children:"Yearly"})]}),e.jsx(p,{label:"Compliance Rate",name:"compliance_rate",type:"number",value:(n==null?void 0:n.compliance_rate)||"",onChange:s=>{const t=s.target.value;/^\d*\.?\d*$/.test(t)&&j(s)},inputProps:{step:"0.01",min:"0"},fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Challenges",name:"challenges",value:(n==null?void 0:n.challenges)||"",onChange:j,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Violations",name:"violations_reports",value:(n==null?void 0:n.violations_reports)||"",onChange:j,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Feedback Mechanisms",name:"feedback_mechanisms",value:(n==null?void 0:n.feedback_mechanisms)||"",onChange:j,fullWidth:!0,margin:"normal"})]}),e.jsxs(oe,{children:[e.jsx(T,{onClick:()=>h(!1),children:"Cancel"}),e.jsx(T,{variant:"contained",onClick:F,children:"Save"})]})]}),e.jsx(re,{open:f.open,autoHideDuration:4e3,onClose:()=>b({open:!1,message:"",severity:"info"}),children:e.jsx(le,{onClose:()=>b({open:!1,message:"",severity:"info"}),severity:f.severity,sx:{width:"100%"},children:f.message})})]})}function Tt(){const[i,l]=r.useState([]),[c,y]=r.useState(""),[m,_]=r.useState(0),[d,C]=r.useState(10),[v,g]=r.useState(!0),[f,b]=r.useState({open:!1,message:"",severity:"info"}),[E,h]=r.useState(!1),[n,w]=r.useState(null);r.useEffect(()=>{x()},[]);const x=async()=>{try{const s=await Je();l(s||[])}catch{b({open:!0,message:"No Ordinance Found.",severity:"error"})}finally{g(!1)}},P=r.useMemo(()=>i.filter(s=>{var k,B,A;const t=c.toLowerCase(),o=((k=s.title)==null?void 0:k.toLowerCase().includes(t))||((B=s.number)==null?void 0:B.toString().toLowerCase().includes(t)),R=(A=s.impact_assessment)==null?void 0:A.some(I=>[].some(D=>I[D]&&I[D].toLowerCase().includes(t)));return o||R}),[i,c]),M=(s,t)=>{w({id:(t==null?void 0:t.id)||"",ordinance_id:s.id,funding_source:(t==null?void 0:t.funding_source)||"General Fund",outcomes_results:(t==null?void 0:t.outcomes_results)||"",gender_responsiveness_impact:(t==null?void 0:t.gender_responsiveness_impact)||"",community_benefits:(t==null?void 0:t.community_benefits)||"",adjustments_needed:(t==null?void 0:t.adjustments_needed)||"",feedback_mechanisms:(t==null?void 0:t.feedback_mechanisms)||""}),h(!0)},j=s=>{w({...n,[s.target.name]:s.target.value})},F=async()=>{try{n.id?(await Xe(n.id,n),alert("Monitoring Data updated successfully!")):(await Ze(n),alert("Monitoring Data added successfully!")),h(!1),g(!0),x()}catch(s){b({open:!0,message:"Failed to save Monitoring Data. Please try again.",severity:"error"}),console.error("Error saving Monitoring Data:",s)}},u=s=>y(s.target.value),S=(s,t)=>_(t),L=s=>{C(parseInt(s.target.value,10)),_(0)};return v?e.jsx(ie,{}):e.jsxs("div",{children:[e.jsx(p,{label:"Search Record",variant:"outlined",margin:"normal",value:c,onChange:u}),e.jsx(J,{children:e.jsxs(X,{children:[e.jsx(Z,{children:e.jsxs(O,{children:[e.jsx(a,{children:"Title"}),e.jsx(a,{children:"Outcome Results"}),e.jsx(a,{children:"Gender Responsiveness Impact"}),e.jsx(a,{children:"Funding Source"}),e.jsx(a,{children:"Community Benefits"}),e.jsx(a,{children:"Adjustments Needed"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(ee,{children:P.slice(m*d,m*d+d).flatMap(s=>s.impact_assessment.length>0?s.impact_assessment.map(t=>e.jsxs(O,{children:[e.jsxs(a,{children:[s.title," ",s.number]}),e.jsx(a,{children:t.outcomes_results}),e.jsx(a,{children:t.gender_responsiveness_impact}),e.jsxs(a,{children:[t.funding_source,"%"]}),e.jsx(a,{children:t.community_benefits}),e.jsx(a,{children:t.adjustments_needed}),e.jsx(a,{children:e.jsx(T,{variant:"outlined",onClick:()=>M(s,t),children:"Edit"})})]},`${s.id}-${t.id}`)):e.jsxs(O,{children:[e.jsxs(a,{children:[s.title," ",s.number]}),e.jsx(a,{colSpan:5,children:"No Assessment Data"}),e.jsx(a,{children:e.jsx(T,{variant:"contained",onClick:()=>M(s,null),children:"Add"})})]},s.id))})]})}),e.jsx(U,{sx:{position:"absolute",bottom:0,right:0},children:e.jsx(te,{rowsPerPageOptions:[10,20,100],component:"div",count:P.length,rowsPerPage:d,page:m,onPageChange:S,onRowsPerPageChange:L})}),e.jsxs(q,{open:E,onClose:()=>h(!1),children:[e.jsxs(K,{children:[n!=null&&n.id?"Edit":"Add"," Monitoring Data"]}),e.jsxs(Y,{children:[e.jsx(p,{label:"Outcome Results",name:"outcomes_results",value:(n==null?void 0:n.outcomes_results)||"",onChange:j,fullWidth:!0,margin:"normal"}),e.jsxs(p,{label:"Funding Source",name:"funding_source",select:!0,onChange:j,value:(n==null?void 0:n.funding_source)||"",fullWidth:!0,margin:"normal",children:[e.jsx(Q,{value:"Monthly",children:"General Fund"}),e.jsx(Q,{value:"Quarterly",children:"Grants"}),e.jsx(Q,{value:"Yearly",children:"Others"})]}),e.jsx(p,{label:"Gender Responsiveness Impact",name:"gender_responsiveness_impact",value:(n==null?void 0:n.gender_responsiveness_impact)||"",onChange:j,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Community Benefits",name:"community_benefits",value:(n==null?void 0:n.community_benefits)||"",onChange:j,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Adjustments Needed",name:"adjustments_needed",value:(n==null?void 0:n.adjustments_needed)||"",onChange:j,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Feedback Mechanisms",name:"feedback_mechanisms",value:(n==null?void 0:n.feedback_mechanisms)||"",onChange:j,fullWidth:!0,margin:"normal"})]}),e.jsxs(oe,{children:[e.jsx(T,{onClick:()=>h(!1),children:"Cancel"}),e.jsx(T,{variant:"contained",onClick:F,children:"Save"})]})]}),e.jsx(re,{open:f.open,autoHideDuration:4e3,onClose:()=>b({open:!1,message:"",severity:"info"}),children:e.jsx(le,{onClose:()=>b({open:!1,message:"",severity:"info"}),severity:f.severity,sx:{width:"100%"},children:f.message})})]})}function Lt(){const[i,l]=r.useState(0),c=(y,m)=>{l(m)};return e.jsxs(et,{children:[e.jsxs(tt,{value:i,onChange:c,children:[e.jsx(V,{label:"Ordinance Tables"}),e.jsx(V,{label:"Coverage"}),e.jsx(V,{label:"Objectives"}),e.jsx(V,{label:"Budget"}),e.jsx(V,{label:"Records Monitoring"}),e.jsx(V,{label:"IAS"})]}),e.jsxs("div",{style:{marginTop:"30px"},children:[i===0&&e.jsx(Pt,{formType:"A"}),i===1&&e.jsx(Ct,{formType:"B"}),i===2&&e.jsx(wt,{formType:"C"}),i===3&&e.jsx(Mt,{formType:"D"}),i===4&&e.jsx(Rt,{formType:"E"}),i===5&&e.jsx(Tt,{formType:"F"})]})]})}export{Lt as default};
