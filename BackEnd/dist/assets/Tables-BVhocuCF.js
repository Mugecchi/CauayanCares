import{c as ft,g as xt,a as s,e as jt,o as vt,y as yt,D as ve,q as bt,n as _t,E as He,t as St,F as Ct,j as e,f as Ue,G as ye,s as Ee,H as wt,I as Je,h as Pt,m as Ae,i as Ke,J as Ve,B as q,K as Tt,L as Mt,M as Rt,N as Ot,O as ue,Q as R,R as Dt,S as Et,U as At,V as It,W as Lt,X as kt,Y as Ft,Z as Nt,$ as Wt,a0 as $t,a1 as Bt,a2 as Gt,a3 as Qt,a4 as zt,a5 as Ht,a6 as Ut,a7 as Y}from"./index-CJhurDKw.js";import{G as Vt,T as p}from"./TextField-Gt7KocES.js";import{T as J,a as K,b as X,c as E,d as r,e as Z}from"./TableRow-BR0V0JYl.js";import{P as Xe}from"./Popper-BUFeaLF-.js";import{I as De}from"./IconButton-BvZfMOCL.js";import{T as ee,C as qt}from"./Close-Dy_xA5Zf.js";import{S as te,A as ne}from"./Snackbar-Cux9RWyV.js";import{D as ae,a as re,b as se}from"./DialogTitle-XUSj7cbv.js";import{M as U}from"./MenuItem-YB8qunKC.js";import{D as he}from"./DialogActions-AHNQi9TV.js";function Yt(l){return xt("MuiTooltip",l)}const b=ft("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function Jt(l){return Math.round(l*1e5)/1e5}const Kt=l=>{const{classes:o,disableInteractive:c,arrow:v,touch:f,placement:y}=l,h={popper:["popper",!c&&"popperInteractive",v&&"popperArrow"],tooltip:["tooltip",v&&"tooltipArrow",f&&"touch",`tooltipPlacement${Je(y.split("-")[0])}`],arrow:["arrow"]};return Pt(h,Yt,o)},Xt=Ee(Xe,{name:"MuiTooltip",slot:"Popper",overridesResolver:(l,o)=>{const{ownerState:c}=l;return[o.popper,!c.disableInteractive&&o.popperInteractive,c.arrow&&o.popperArrow,!c.open&&o.popperClose]}})(Ae(({theme:l})=>({zIndex:(l.vars||l).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:o})=>!o.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:o})=>!o,style:{pointerEvents:"none"}},{props:({ownerState:o})=>o.arrow,style:{[`&[data-popper-placement*="bottom"] .${b.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${b.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${b.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${b.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:o})=>o.arrow&&!o.isRtl,style:{[`&[data-popper-placement*="right"] .${b.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:o})=>o.arrow&&!!o.isRtl,style:{[`&[data-popper-placement*="right"] .${b.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:o})=>o.arrow&&!o.isRtl,style:{[`&[data-popper-placement*="left"] .${b.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:o})=>o.arrow&&!!o.isRtl,style:{[`&[data-popper-placement*="left"] .${b.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),Zt=Ee("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(l,o)=>{const{ownerState:c}=l;return[o.tooltip,c.touch&&o.touch,c.arrow&&o.tooltipArrow,o[`tooltipPlacement${Je(c.placement.split("-")[0])}`]]}})(Ae(({theme:l})=>({backgroundColor:l.vars?l.vars.palette.Tooltip.bg:Ke(l.palette.grey[700],.92),borderRadius:(l.vars||l).shape.borderRadius,color:(l.vars||l).palette.common.white,fontFamily:l.typography.fontFamily,padding:"4px 8px",fontSize:l.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:l.typography.fontWeightMedium,[`.${b.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${b.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${b.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${b.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:o})=>o.arrow,style:{position:"relative",margin:0}},{props:({ownerState:o})=>o.touch,style:{padding:"8px 16px",fontSize:l.typography.pxToRem(14),lineHeight:`${Jt(16/14)}em`,fontWeight:l.typography.fontWeightRegular}},{props:({ownerState:o})=>!o.isRtl,style:{[`.${b.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${b.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:o})=>!o.isRtl&&o.touch,style:{[`.${b.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${b.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:o})=>!!o.isRtl,style:{[`.${b.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${b.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:o})=>!!o.isRtl&&o.touch,style:{[`.${b.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${b.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:o})=>o.touch,style:{[`.${b.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:o})=>o.touch,style:{[`.${b.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),en=Ee("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(l,o)=>o.arrow})(Ae(({theme:l})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:l.vars?l.vars.palette.Tooltip.bg:Ke(l.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let be=!1;const qe=new wt;let de={x:0,y:0};function _e(l,o){return(c,...v)=>{o&&o(c,...v),l(c,...v)}}const Ye=s.forwardRef(function(o,c){const v=jt({props:o,name:"MuiTooltip"}),{arrow:f=!1,children:y,classes:h,components:O={},componentsProps:C={},describeChild:w=!1,disableFocusListener:x=!1,disableHoverListener:g=!1,disableInteractive:W=!1,disableTouchListener:m=!1,enterDelay:a=100,enterNextDelay:P=0,enterTouchDelay:T=700,followCursor:_=!1,id:M,leaveDelay:d=0,leaveTouchDelay:$=1500,onClose:L,onOpen:k,open:B,placement:n="bottom",PopperComponent:t,PopperProps:i={},slotProps:j={},slots:F={},title:S,TransitionComponent:A,TransitionProps:I,...D}=v,N=s.isValidElement(y)?y:e.jsx("span",{children:y}),Ie=vt(),Ze=yt(),[ie,Le]=s.useState(),[Se,et]=s.useState(null),pe=s.useRef(!1),Ce=W||_,ke=ve(),we=ve(),ge=ve(),Fe=ve(),[tt,Ne]=bt({controlled:B,default:!1,name:"Tooltip",state:"open"});let H=tt;const Pe=_t(M),oe=s.useRef(),me=He(()=>{oe.current!==void 0&&(document.body.style.WebkitUserSelect=oe.current,oe.current=void 0),Fe.clear()});s.useEffect(()=>me,[me]);const We=u=>{qe.clear(),be=!0,Ne(!0),k&&!H&&k(u)},fe=He(u=>{qe.start(800+d,()=>{be=!1}),Ne(!1),L&&H&&L(u),ke.start(Ie.transitions.duration.shortest,()=>{pe.current=!1})}),xe=u=>{pe.current&&u.type!=="touchstart"||(ie&&ie.removeAttribute("title"),we.clear(),ge.clear(),a||be&&P?we.start(be?P:a,()=>{We(u)}):We(u))},Te=u=>{we.clear(),ge.start(d,()=>{fe(u)})},[,$e]=s.useState(!1),Be=u=>{Ve(u.target)||($e(!1),Te(u))},Ge=u=>{ie||Le(u.currentTarget),Ve(u.target)&&($e(!0),xe(u))},Qe=u=>{pe.current=!0;const z=N.props;z.onTouchStart&&z.onTouchStart(u)},nt=u=>{Qe(u),ge.clear(),ke.clear(),me(),oe.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Fe.start(T,()=>{document.body.style.WebkitUserSelect=oe.current,xe(u)})},at=u=>{N.props.onTouchEnd&&N.props.onTouchEnd(u),me(),ge.start($,()=>{fe(u)})};s.useEffect(()=>{if(!H)return;function u(z){z.key==="Escape"&&fe(z)}return document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u)}},[fe,H]);const rt=St(Ct(N),Le,c);!S&&S!==0&&(H=!1);const Me=s.useRef(),st=u=>{const z=N.props;z.onMouseMove&&z.onMouseMove(u),de={x:u.clientX,y:u.clientY},Me.current&&Me.current.update()},le={},Re=typeof S=="string";w?(le.title=!H&&Re&&!g?S:null,le["aria-describedby"]=H?Pe:null):(le["aria-label"]=Re?S:null,le["aria-labelledby"]=H&&!Re?Pe:null);const G={...le,...D,...N.props,className:Ue(D.className,N.props.className),onTouchStart:Qe,ref:rt,..._?{onMouseMove:st}:{}},ce={};m||(G.onTouchStart=nt,G.onTouchEnd=at),g||(G.onMouseOver=_e(xe,G.onMouseOver),G.onMouseLeave=_e(Te,G.onMouseLeave),Ce||(ce.onMouseOver=xe,ce.onMouseLeave=Te)),x||(G.onFocus=_e(Ge,G.onFocus),G.onBlur=_e(Be,G.onBlur),Ce||(ce.onFocus=Ge,ce.onBlur=Be));const V={...v,isRtl:Ze,arrow:f,disableInteractive:Ce,placement:n,PopperComponentProp:t,touch:pe.current},Q=typeof j.popper=="function"?j.popper(V):j.popper,it=s.useMemo(()=>{var z,ze;let u=[{name:"arrow",enabled:!!Se,options:{element:Se,padding:4}}];return(z=i.popperOptions)!=null&&z.modifiers&&(u=u.concat(i.popperOptions.modifiers)),(ze=Q==null?void 0:Q.popperOptions)!=null&&ze.modifiers&&(u=u.concat(Q.popperOptions.modifiers)),{...i.popperOptions,...Q==null?void 0:Q.popperOptions,modifiers:u}},[Se,i.popperOptions,Q==null?void 0:Q.popperOptions]),Oe=Kt(V),ot=typeof j.transition=="function"?j.transition(V):j.transition,je={slots:{popper:O.Popper,transition:O.Transition??A,tooltip:O.Tooltip,arrow:O.Arrow,...F},slotProps:{arrow:j.arrow??C.arrow,popper:{...i,...Q??C.popper},tooltip:j.tooltip??C.tooltip,transition:{...I,...ot??C.transition}}},[lt,ct]=ye("popper",{elementType:Xt,externalForwardedProps:je,ownerState:V,className:Ue(Oe.popper,i==null?void 0:i.className)}),[dt,ut]=ye("transition",{elementType:Vt,externalForwardedProps:je,ownerState:V}),[ht,pt]=ye("tooltip",{elementType:Zt,className:Oe.tooltip,externalForwardedProps:je,ownerState:V}),[gt,mt]=ye("arrow",{elementType:en,className:Oe.arrow,externalForwardedProps:je,ownerState:V,ref:et});return e.jsxs(s.Fragment,{children:[s.cloneElement(N,G),e.jsx(lt,{as:t??Xe,placement:n,anchorEl:_?{getBoundingClientRect:()=>({top:de.y,left:de.x,right:de.x,bottom:de.y,width:0,height:0})}:ie,popperRef:Me,open:ie?H:!1,id:Pe,transition:!0,...ce,...ct,popperOptions:it,children:({TransitionProps:u})=>e.jsx(dt,{timeout:Ie.transitions.duration.shorter,...u,...ut,children:e.jsxs(ht,{...pt,children:[S,f?e.jsx(gt,{...mt}):null]})})})]})});function tn(){const[l,o]=s.useState([]),[c,v]=s.useState(""),[f,y]=s.useState(""),[h,O]=s.useState([]),[C,w]=s.useState(0),[x,g]=s.useState(10),[W,m]=s.useState(!1),[a,P]=s.useState(1),[T,_]=s.useState(""),[M,d]=s.useState({open:!1,message:"",severity:"info"});s.useEffect(()=>{var i;const n=localStorage.getItem("eoTableState");if(n&&((i=JSON.parse(n).records)==null?void 0:i.length)>0)return;(async()=>{try{const j=await Mt(C+1,x);j.ordinances.length===0?(d({message:"No Records found.",severity:"error"}),o([]),O([])):(d({message:"Records fetched Successfully",severity:"success"}),o(j.ordinances),O(j.ordinances)),P(j.total_pages)}catch{d({message:"An error occurred while fetching ordinances.",severity:"error"})}})()},[C,x]),s.useEffect(()=>{const n=localStorage.getItem("eoTableState");if(n){const t=JSON.parse(n);o(t.records||[]),O(t.filteredRecords||[]),w(t.page||0),g(t.rowsPerPage||10),_(t.searchQuery||""),v(t.selectedStatus||""),P(t.totalPages||1)}},[]),s.useEffect(()=>{localStorage.setItem("eoTableState",JSON.stringify({records:l,filteredRecords:h,page:C,rowsPerPage:x,searchQuery:T,selectedStatus:c,totalPages:a}))},[l,h,C,x,T,c,a]);const $=(n,t)=>{w(t)},L=n=>{g(parseInt(n.target.value,10)),w(0)},k=async n=>{if(window.confirm("Are you sure you want to delete this record?"))try{await Rt(n),o(t=>t.filter(i=>i.id!==n)),O(t=>t.filter(i=>i.id!==n)),d({message:"Record deleted successfully.",severity:"success"})}catch(t){console.error("Error deleting record:",t),d({message:"An error occurred while deleting the record.",severity:"error"})}},B=n=>{_(n.target.value)};return e.jsxs("div",{children:[e.jsxs(q,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(p,{label:"Search by Title or Status",variant:"outlined",margin:"normal",value:T,onChange:B}),e.jsxs(p,{select:!0,label:"Filter by Document Type",value:c,onChange:n=>v(n.target.value),SelectProps:{native:!0},variant:"outlined",margin:"normal",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"Executive Order",children:"Executive Order"}),e.jsx("option",{value:"Ordinance",children:"Ordinance"}),e.jsx("option",{value:"Memo",children:"Memo"}),e.jsx("option",{value:"Resolution",children:"Resolution"})]})]}),e.jsx(J,{children:e.jsxs(K,{children:[e.jsx(X,{children:e.jsxs(E,{children:[e.jsx(r,{children:"Title"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Details"}),e.jsx(r,{children:"Series No."}),e.jsx(r,{children:"Document Type"}),e.jsx(r,{children:"Date Issued"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(Z,{children:h.map(n=>e.jsxs(E,{children:[e.jsx(r,{children:n.title}),e.jsx(r,{children:n.status}),e.jsx(r,{children:n.details}),e.jsx(r,{children:n.number}),e.jsx(r,{children:n.document_type}),e.jsx(r,{children:new Date(n.date_issued).toLocaleDateString()}),e.jsxs(r,{children:[n.file_path&&e.jsx(Ye,{title:"Preview File",arrow:!0,children:e.jsx(De,{onClick:()=>Tt(n.file_path,y,m),children:e.jsx("img",{src:"/Printer.svg",alt:"preview"})})}),e.jsx(Ye,{title:"Delete Ordinance",arrow:!0,children:e.jsx(De,{onClick:()=>k(n.id),color:"error",children:e.jsx("img",{src:"/trash.svg",alt:"delete"})})})]})]},n.id))})]})}),e.jsx(q,{sx:{position:"absolute",bottom:0,right:0},children:e.jsx(ee,{component:"div",count:a*x,page:C,onPageChange:$,rowsPerPage:x,onRowsPerPageChange:L,rowsPerPageOptions:[10,25,50]})}),e.jsx(te,{open:!!M.message,autoHideDuration:4e3,onClose:()=>d({open:!1,message:"",severity:"info"}),children:e.jsx(ne,{onClose:()=>d({open:!1,message:"",severity:"info"}),severity:M.severity||"info",sx:{width:"100%"},children:M.message})}),e.jsxs(ae,{open:W,onClose:()=>m(!1),maxWidth:"lg",fullWidth:!0,children:[e.jsxs(re,{children:["Preview Records",e.jsx(De,{onClick:()=>m(!1),style:{float:"right"},children:e.jsx(qt,{})})]}),e.jsx(se,{dividers:!0,children:f?e.jsx("iframe",{src:f,width:"100%",height:"600px",title:"Ordinance Preview",style:{border:"none"}}):e.jsx("p",{children:"No file selected."})})]})]})}function nn(){const[l,o]=s.useState([]),[c,v]=s.useState(""),[f,y]=s.useState(0),[h,O]=s.useState(10),[C,w]=s.useState(!0),[x,g]=s.useState({open:!1,message:"",severity:"info"}),[W,m]=s.useState(!1),[a,P]=s.useState(null);s.useEffect(()=>{T()},[]);const T=async()=>{try{const t=await Ot();o(t||[])}catch{g({open:!0,message:"No Ordinance Found.",severity:"error"})}finally{w(!1)}},_=s.useMemo(()=>l.filter(t=>{var S,A,I;const i=c.toLowerCase(),j=((S=t.title)==null?void 0:S.toLowerCase().includes(i))||((A=t.number)==null?void 0:A.toString().toLowerCase().includes(i)),F=(I=t.coverage_scopes)==null?void 0:I.some(D=>["target_beneficiaries","geographical_coverage","inclusive_period"].some(N=>D[N]&&D[N].toLowerCase().includes(i)));return j||F}),[l,c]),M=(t,i)=>{P({id:(i==null?void 0:i.id)||"",ordinance_id:t.id,inclusive_period:(i==null?void 0:i.inclusive_period)||"",target_beneficiaries:(i==null?void 0:i.target_beneficiaries)||"General Public",geographical_coverage:(i==null?void 0:i.geographical_coverage)||""}),m(!0)},d=t=>{P({...a,[t.target.name]:t.target.value})},$=async()=>{try{a.id?(await Dt(a.id,a),alert("Coverage scope updated successfully!")):(await Et(a),alert("Coverage scope added successfully!")),m(!1),w(!0),T()}catch(t){g({open:!0,message:"Failed to save coverage scope. Please try again.",severity:"error"}),console.error("Error saving coverage scope:",t)}},L=t=>v(t.target.value),k=(t,i)=>y(i),B=t=>{O(parseInt(t.target.value,10)),y(0)};if(C)return e.jsx(ue,{});const n=["City-Wide","Alicaocao","Alinam","Amobocan","Andarayan","Baculod","Baringin Norte","Baringin Sur","Buena Suerte","Bugallon","Buyon","Cabaruan","Cabugao","Carabatan Bacareno","Carabatan Chica","Carabatan Grande","Carabatan Punta","Casalatan","Cassap Fuera","Catalina","Culalabat","Dabburab","De Vera","Dianao","Dissimuray","District I (Poblacion)","District II (Poblacion)","District III (Poblacion)","Duminit","Faustino (Sipay)","Gagabutan","Gappal","Guayabal","Labinab","Linglingay","Mabantad","Maligaya","Manaoag","Marabulig I","Marabulig II","Minante I","Minante II","Nagcampegan","Naganacan","Nagrumbuan","Nungnungan I","Nungnungan II","Pinoma","Rizal","Rizaluna","Rogus","San Antonio","San Fermin (Poblacion)","San Francisco","San Isidro","San Luis","San Pablo (Casap Hacienda)","Santa Luciana (Daburab 2)","Santa Maria","Sillawit","Sinippil","Tagaran","Turayong","Union","Villa Concepcion","Villa Luna","Villaflor"];return e.jsxs("div",{children:[e.jsx(p,{label:"Search Record",variant:"outlined",margin:"normal",value:c,onChange:L}),e.jsx(J,{children:e.jsxs(K,{children:[e.jsx(X,{children:e.jsxs(E,{children:[e.jsx(r,{children:"Title"}),e.jsx(r,{children:"Inclusive Period"}),e.jsx(r,{children:"Target Beneficiaries"}),e.jsx(r,{children:"Geographical Coverage"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(Z,{children:_.slice(f*h,f*h+h).flatMap(t=>t.coverage_scopes.length>0?t.coverage_scopes.map(i=>e.jsxs(E,{children:[e.jsxs(r,{children:[t.title," ",t.number]}),e.jsx(r,{children:i.inclusive_period||"No coverage scope added"}),e.jsx(r,{children:i.target_beneficiaries}),e.jsx(r,{children:i.geographical_coverage}),e.jsx(r,{children:e.jsx(R,{variant:"outlined",onClick:()=>M(t,i),children:"Edit"})})]},`${t.id}-${i.id}`)):e.jsxs(E,{children:[e.jsxs(r,{children:[t.title," ",t.number]}),e.jsx(r,{colSpan:3,children:"No record"}),e.jsx(r,{children:e.jsx(R,{variant:"contained",onClick:()=>M(t,null),children:"Add"})})]},t.id))})]})}),e.jsx(q,{sx:{position:"absolute",bottom:0,right:0},children:e.jsx(ee,{rowsPerPageOptions:[10,20,100],component:"div",count:_.length,rowsPerPage:h,page:f,onPageChange:k,onRowsPerPageChange:B})}),e.jsxs(ae,{open:W,onClose:()=>m(!1),children:[e.jsxs(re,{children:[a!=null&&a.id?"Edit":"Add"," Coverage Scope"]}),e.jsxs(se,{children:[e.jsx(p,{label:"Inclusive Period",name:"inclusive_period",value:(a==null?void 0:a.inclusive_period)||"",onChange:d,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Target Beneficiaries",name:"target_beneficiaries",value:(a==null?void 0:a.target_beneficiaries)||"General Public",onChange:d,select:!0,fullWidth:!0,margin:"normal",children:["General Public","Women","Children","Solo Parents","PWDs","MSMEs","Others"].map(t=>e.jsx(U,{value:t,children:t},t))}),e.jsx(p,{label:"Geographical Coverage",name:"geographical_coverage",value:(a==null?void 0:a.geographical_coverage)||"",onChange:d,fullWidth:!0,select:!0,margin:"normal",children:n.map(t=>e.jsx(U,{value:t,children:t},t))})]}),e.jsxs(he,{children:[e.jsx(R,{onClick:()=>m(!1),children:"Cancel"}),e.jsx(R,{variant:"contained",onClick:$,children:"Save"})]})]}),e.jsx(te,{open:x.open,autoHideDuration:4e3,onClose:()=>g({open:!1,message:"",severity:"info"}),children:e.jsx(ne,{onClose:()=>g({open:!1,message:"",severity:"info"}),severity:x.severity,sx:{width:"100%"},children:x.message})})]})}function an(){const[l,o]=s.useState([]),[c,v]=s.useState(""),[f,y]=s.useState(0),[h,O]=s.useState(10),[C,w]=s.useState(!0),[x,g]=s.useState({open:!1,message:"",severity:"info"}),[W,m]=s.useState(!1),[a,P]=s.useState(null);s.useEffect(()=>{T()},[]);const T=async()=>{try{const n=await At();o(n||[])}catch{g({open:!0,message:"No Record Found.",severity:"error"})}finally{w(!1)}},_=s.useMemo(()=>l.filter(n=>{var F,S,A;const t=c.toLowerCase(),i=((F=n.title)==null?void 0:F.toLowerCase().includes(t))||((S=n.number)==null?void 0:S.toString().toLowerCase().includes(t)),j=(A=n.objectives_implementation)==null?void 0:A.some(I=>["lead_agency","supporting_agencies","policy_objectives","key_provisions","programs_activities"].some(D=>I[D]&&I[D].toLowerCase().includes(t)));return i||j}),[l,c]),M=(n,t)=>{P({id:(t==null?void 0:t.id)||"",ordinance_id:n.id,policy_objectives:(t==null?void 0:t.policy_objectives)||"",lead_agency:(t==null?void 0:t.lead_agency)||"",supporting_agencies:(t==null?void 0:t.supporting_agencies)||"",key_provisions:(t==null?void 0:t.key_provisions)||"",programs_activities:(t==null?void 0:t.programs_activities)||""}),m(!0)},d=n=>{P({...a,[n.target.name]:n.target.value})},$=async()=>{try{a.id?(await It(a.id,a),alert("Coverage scope updated successfully!")):(await Lt(a),alert("Coverage scope added successfully!")),m(!1),w(!0),T()}catch(n){g({open:!0,message:"Failed to save coverage scope. Please try again.",severity:"error"}),console.error("Error saving coverage scope:",n)}},L=n=>v(n.target.value),k=(n,t)=>y(t),B=n=>{O(parseInt(n.target.value,10)),y(0)};return C?e.jsx(ue,{}):e.jsxs("div",{children:[e.jsx(p,{label:"Search Record",variant:"outlined",margin:"normal",value:c,onChange:L}),e.jsx(J,{children:e.jsxs(K,{children:[e.jsx(X,{children:e.jsxs(E,{children:[e.jsx(r,{children:"Title"}),e.jsx(r,{children:"Policy Objectives"}),e.jsx(r,{children:"Lead Agency"}),e.jsx(r,{children:"Supporting Agencies"}),e.jsx(r,{children:"Key Provisions"}),e.jsx(r,{children:"Programs/Activities"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(Z,{children:_.slice(f*h,f*h+h).flatMap(n=>n.objectives_implementation.length>0?n.objectives_implementation.map(t=>e.jsxs(E,{children:[e.jsxs(r,{children:[n.title," ",n.number]}),e.jsx(r,{children:t.policy_objectives||"No Objectives Data"}),e.jsx(r,{children:t.lead_agency}),e.jsx(r,{children:t.supporting_agencies}),e.jsx(r,{children:t.key_provisions}),e.jsx(r,{children:t.programs_activities}),e.jsx(r,{children:e.jsx(R,{variant:"outlined",onClick:()=>M(n,t),children:"Edit"})})]},`${n.id}-${t.id}`)):e.jsxs(E,{children:[e.jsxs(r,{children:[n.title," ",n.number]}),e.jsx(r,{colSpan:5,children:"No Objectives/Implementation"}),e.jsx(r,{children:e.jsx(R,{variant:"contained",onClick:()=>M(n,null),children:"Add"})})]},n.id))})]})}),e.jsx(q,{sx:{position:"absolute",bottom:0,right:0},children:e.jsx(ee,{rowsPerPageOptions:[10,20,100],component:"div",count:_.length,rowsPerPage:h,page:f,onPageChange:k,onRowsPerPageChange:B})}),e.jsxs(ae,{open:W,onClose:()=>m(!1),children:[e.jsxs(re,{children:[a!=null&&a.id?"Edit":"Add"," Coverage Scope"]}),e.jsxs(se,{children:[e.jsx(p,{label:"Policy Objectives",name:"policy_objectives",value:(a==null?void 0:a.policy_objectives)||"",onChange:d,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Lead Agency ",name:"lead_agency",value:(a==null?void 0:a.lead_agency)||"",onChange:d,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Supporting Agencies",name:"supporting_agencies",value:(a==null?void 0:a.supporting_agencies)||"",onChange:d,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Key Provisions",name:"key_provisions",value:(a==null?void 0:a.key_provisions)||"",onChange:d,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Programs Activities",name:"programs_activities",value:(a==null?void 0:a.programs_activities)||"",onChange:d,fullWidth:!0,margin:"normal"})]}),e.jsxs(he,{children:[e.jsx(R,{onClick:()=>m(!1),children:"Cancel"}),e.jsx(R,{variant:"contained",onClick:$,children:"Save"})]})]}),e.jsx(te,{open:x.open,autoHideDuration:4e3,onClose:()=>g({open:!1,message:"",severity:"info"}),children:e.jsx(ne,{onClose:()=>g({open:!1,message:"",severity:"info"}),severity:x.severity,sx:{width:"100%"},children:x.message})})]})}function rn(){const[l,o]=s.useState([]),[c,v]=s.useState(""),[f,y]=s.useState(0),[h,O]=s.useState(10),[C,w]=s.useState(!0),[x,g]=s.useState({open:!1,message:"",severity:"info"}),[W,m]=s.useState(!1),[a,P]=s.useState(null);s.useEffect(()=>{T()},[]);const T=async()=>{try{const t=await kt();o(t||[])}catch{g({open:!0,message:"No Record Found.",severity:"error"})}finally{w(!1)}},_=s.useMemo(()=>l.filter(t=>{var S,A,I;const i=c.toLowerCase(),j=((S=t.title)==null?void 0:S.toLowerCase().includes(i))||((A=t.number)==null?void 0:A.toString().toLowerCase().includes(i)),F=(I=t.budget_allocation)==null?void 0:I.some(D=>["allocated_budget","utilized_budget","gad_budget","financial_transparency_measures"].some(N=>D[N]&&D[N].toLowerCase().includes(i)));return j||F}),[l,c]),M=(t,i)=>{P({id:(i==null?void 0:i.id)||"",ordinance_id:t.id,allocated_budget:(i==null?void 0:i.allocated_budget)||"",utilized_budget:(i==null?void 0:i.utilized_budget)||"",gad_budget:(i==null?void 0:i.gad_budget)||"",financial_transparency_measures:(i==null?void 0:i.financial_transparency_measures)||""}),m(!0)},d=t=>{P({...a,[t.target.name]:t.target.value})},$=async()=>{try{a.id?(await Ft(a.id,a),alert("Coverage scope updated successfully!")):(await Nt(a),alert("Coverage scope added successfully!")),m(!1),w(!0),T()}catch(t){g({open:!0,message:"Failed to save coverage scope. Please try again.",severity:"error"}),console.error("Error saving coverage scope:",t)}},L=t=>v(t.target.value),k=(t,i)=>y(i),B=t=>{O(parseInt(t.target.value,10)),y(0)};if(C)return e.jsx(ue,{});const n=t=>!t||isNaN(t)?"â‚±0.00":new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(t);return e.jsxs("div",{children:[e.jsx(p,{label:"Search Record",variant:"outlined",margin:"normal",value:c,onChange:L}),e.jsx(J,{children:e.jsxs(K,{children:[e.jsx(X,{children:e.jsxs(E,{children:[e.jsx(r,{children:"Title"}),e.jsx(r,{children:"Allocated Budget"}),e.jsx(r,{children:"Utilized Budget"}),e.jsx(r,{children:"GAD Budget"}),e.jsx(r,{children:"Financial Transparency Measures"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(Z,{children:_.slice(f*h,f*h+h).flatMap(t=>t.budget_allocation.length>0?t.budget_allocation.map(i=>e.jsxs(E,{children:[e.jsxs(r,{children:[t.title," ",t.number]}),e.jsx(r,{children:n(i.allocated_budget)}),e.jsx(r,{children:n(i.utilized_budget)}),e.jsx(r,{children:n(i.gad_budget)}),e.jsx(r,{children:i.financial_transparency_measures}),e.jsx(r,{children:e.jsx(R,{variant:"outlined",onClick:()=>M(t,i),children:"Edit"})})]},`${t.id}-${i.id}`)):e.jsxs(E,{children:[e.jsxs(r,{children:[t.title," ",t.number]}),e.jsx(r,{colSpan:4,children:"No Budget Allocation Data"}),e.jsx(r,{children:e.jsx(R,{variant:"contained",onClick:()=>M(t,null),children:"Add"})})]},t.id))})]})}),e.jsx(q,{sx:{position:"absolute",bottom:0,right:0},children:e.jsx(ee,{rowsPerPageOptions:[10,20,100],component:"div",count:_.length,rowsPerPage:h,page:f,onPageChange:k,onRowsPerPageChange:B})}),e.jsxs(ae,{open:W,onClose:()=>m(!1),children:[e.jsxs(re,{children:[a!=null&&a.id?"Edit":"Add"," Coverage Scope"]}),e.jsxs(se,{children:[e.jsx(p,{label:"Allocated Budget",name:"allocated_budget",type:"number",value:(a==null?void 0:a.allocated_budget)||"",onChange:d,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Utilized Budget",type:"number",name:"utilized_budget",value:(a==null?void 0:a.utilized_budget)||"",onChange:d,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"GAD Budget",type:"number",name:"gad_budget",value:(a==null?void 0:a.gad_budget)||"",onChange:d,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Financial Transparency Measures",name:"financial_transparency_measures",value:(a==null?void 0:a.financial_transparency_measures)||"",onChange:d,fullWidth:!0,margin:"normal"})]}),e.jsxs(he,{children:[e.jsx(R,{onClick:()=>m(!1),children:"Cancel"}),e.jsx(R,{variant:"contained",onClick:$,children:"Save"})]})]}),e.jsx(te,{open:x.open,autoHideDuration:4e3,onClose:()=>g({open:!1,message:"",severity:"info"}),children:e.jsx(ne,{onClose:()=>g({open:!1,message:"",severity:"info"}),severity:x.severity,sx:{width:"100%"},children:x.message})})]})}function sn(){const[l,o]=s.useState([]),[c,v]=s.useState(""),[f,y]=s.useState(0),[h,O]=s.useState(10),[C,w]=s.useState(!0),[x,g]=s.useState({open:!1,message:"",severity:"info"}),[W,m]=s.useState(!1),[a,P]=s.useState(null);s.useEffect(()=>{T()},[]);const T=async()=>{try{const n=await Wt();o(n||[])}catch{g({open:!0,message:"No Record Found.",severity:"error"})}finally{w(!1)}},_=s.useMemo(()=>l.filter(n=>{var F,S,A;const t=c.toLowerCase(),i=((F=n.title)==null?void 0:F.toLowerCase().includes(t))||((S=n.number)==null?void 0:S.toString().toLowerCase().includes(t)),j=(A=n.coverage_scopes)==null?void 0:A.some(I=>["indicators_of_success","monitoring_frequency","compliance_rate","challenges","violations_reports","feedback_mechanisms"].some(D=>I[D]&&I[D].toLowerCase().includes(t)));return i||j}),[l,c]),M=(n,t)=>{P({id:(t==null?void 0:t.id)||"",ordinance_id:n.id,compliance_rate:(t==null?void 0:t.compliance_rate)||"0.00",indicators_of_success:(t==null?void 0:t.indicators_of_success)||"",monitoring_frequency:(t==null?void 0:t.monitoring_frequency)||"Monthly",challenges:(t==null?void 0:t.challenges)||"",violations_reports:(t==null?void 0:t.violations_reports)||"",feedback_mechanisms:(t==null?void 0:t.feedback_mechanisms)||""}),m(!0)},d=n=>{P({...a,[n.target.name]:n.target.value})},$=async()=>{try{a.id?(await $t(a.id,a),alert("Monitoring Data updated successfully!")):(await Bt(a),alert("Monitoring Data added successfully!")),m(!1),w(!0),T()}catch(n){g({open:!0,message:"Failed to save Monitoring Data. Please try again.",severity:"error"}),console.error("Error saving Monitoring Data:",n)}},L=n=>v(n.target.value),k=(n,t)=>y(t),B=n=>{O(parseInt(n.target.value,10)),y(0)};return C?e.jsx(ue,{}):e.jsxs("div",{children:[e.jsx(p,{label:"Search Record",variant:"outlined",margin:"normal",value:c,onChange:L}),e.jsx(J,{children:e.jsxs(K,{children:[e.jsx(X,{children:e.jsxs(E,{children:[e.jsx(r,{children:"Title"}),e.jsx(r,{children:"Indicators of Success"}),e.jsx(r,{children:"Frequency"}),e.jsx(r,{children:"Compliance Rate"}),e.jsx(r,{children:"Challenges"}),e.jsx(r,{children:"Violations"}),e.jsx(r,{children:"Feedback"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(Z,{children:_.slice(f*h,f*h+h).flatMap(n=>n.monitoring_compliance.length>0?n.monitoring_compliance.map(t=>e.jsxs(E,{children:[e.jsxs(r,{children:[n.title," ",n.number]}),e.jsx(r,{children:t.indicators_of_success||"No Monitoring data added"}),e.jsx(r,{children:t.monitoring_frequency}),e.jsx(r,{children:`${t.compliance_rate}%`}),e.jsx(r,{children:t.challenges}),e.jsx(r,{children:t.violations_reports}),e.jsx(r,{children:t.feedback_mechanisms}),e.jsx(r,{children:e.jsx(R,{variant:"outlined",onClick:()=>M(n,t),children:"Edit"})})]},`${n.id}-${t.id}`)):e.jsxs(E,{children:[e.jsxs(r,{children:[n.title," ",n.number]}),e.jsx(r,{colSpan:6,children:"No Monitoring Data"}),e.jsx(r,{children:e.jsx(R,{variant:"contained",onClick:()=>M(n,null),children:"Add"})})]},n.id))})]})}),e.jsx(q,{sx:{position:"absolute",bottom:0,right:0},children:e.jsx(ee,{rowsPerPageOptions:[10,20,100],component:"div",count:_.length,rowsPerPage:h,page:f,onPageChange:k,onRowsPerPageChange:B})}),e.jsxs(ae,{open:W,onClose:()=>m(!1),children:[e.jsxs(re,{children:[a!=null&&a.id?"Edit":"Add"," Monitoring Data"]}),e.jsxs(se,{children:[e.jsx(p,{label:"Indicators of Success",name:"indicators_of_success",value:(a==null?void 0:a.indicators_of_success)||"",onChange:d,fullWidth:!0,margin:"normal"}),e.jsxs(p,{label:"Monitoring Frequency",name:"monitoring_frequency",select:!0,value:(a==null?void 0:a.monitoring_frequency)||"",onChange:d,fullWidth:!0,margin:"normal",children:[e.jsx(U,{value:"Monthly",children:"Monthly"}),e.jsx(U,{value:"Quarterly",children:"Quarterly"}),e.jsx(U,{value:"Yearly",children:"Yearly"})]}),e.jsx(p,{label:"Compliance Rate",name:"compliance_rate",type:"number",value:(a==null?void 0:a.compliance_rate)||"",onChange:n=>{const t=n.target.value;/^\d*\.?\d*$/.test(t)&&d(n)},inputProps:{step:"0.01",min:"0"},fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Challenges",name:"challenges",value:(a==null?void 0:a.challenges)||"",onChange:d,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Violations",name:"violations_reports",value:(a==null?void 0:a.violations_reports)||"",onChange:d,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Feedback Mechanisms",name:"feedback_mechanisms",value:(a==null?void 0:a.feedback_mechanisms)||"",onChange:d,fullWidth:!0,margin:"normal"})]}),e.jsxs(he,{children:[e.jsx(R,{onClick:()=>m(!1),children:"Cancel"}),e.jsx(R,{variant:"contained",onClick:$,children:"Save"})]})]}),e.jsx(te,{open:x.open,autoHideDuration:4e3,onClose:()=>g({open:!1,message:"",severity:"info"}),children:e.jsx(ne,{onClose:()=>g({open:!1,message:"",severity:"info"}),severity:x.severity,sx:{width:"100%"},children:x.message})})]})}function on(){const[l,o]=s.useState([]),[c,v]=s.useState(""),[f,y]=s.useState(0),[h,O]=s.useState(10),[C,w]=s.useState(!0),[x,g]=s.useState({open:!1,message:"",severity:"info"}),[W,m]=s.useState(!1),[a,P]=s.useState(null);s.useEffect(()=>{T()},[]);const T=async()=>{try{const n=await Gt();o(n||[])}catch{g({open:!0,message:"No Record Found.",severity:"error"})}finally{w(!1)}},_=s.useMemo(()=>l.filter(n=>{var F,S,A;const t=c.toLowerCase(),i=((F=n.title)==null?void 0:F.toLowerCase().includes(t))||((S=n.number)==null?void 0:S.toString().toLowerCase().includes(t)),j=(A=n.impact_assessment)==null?void 0:A.some(I=>[].some(D=>I[D]&&I[D].toLowerCase().includes(t)));return i||j}),[l,c]),M=(n,t)=>{P({id:(t==null?void 0:t.id)||"",ordinance_id:n.id,funding_source:(t==null?void 0:t.funding_source)||"General Fund",outcomes_results:(t==null?void 0:t.outcomes_results)||"",gender_responsiveness_impact:(t==null?void 0:t.gender_responsiveness_impact)||"",community_benefits:(t==null?void 0:t.community_benefits)||"",adjustments_needed:(t==null?void 0:t.adjustments_needed)||"",feedback_mechanisms:(t==null?void 0:t.feedback_mechanisms)||""}),m(!0)},d=n=>{P({...a,[n.target.name]:n.target.value})},$=async()=>{try{a.id?(await Qt(a.id,a),alert("Monitoring Data updated successfully!")):(await zt(a),alert("Monitoring Data added successfully!")),m(!1),w(!0),T()}catch(n){g({open:!0,message:"Failed to save Monitoring Data. Please try again.",severity:"error"}),console.error("Error saving Monitoring Data:",n)}},L=n=>v(n.target.value),k=(n,t)=>y(t),B=n=>{O(parseInt(n.target.value,10)),y(0)};return C?e.jsx(ue,{}):e.jsxs("div",{children:[e.jsx(p,{label:"Search Record",variant:"outlined",margin:"normal",value:c,onChange:L}),e.jsx(J,{children:e.jsxs(K,{children:[e.jsx(X,{children:e.jsxs(E,{children:[e.jsx(r,{children:"Title"}),e.jsx(r,{children:"Outcome Results"}),e.jsx(r,{children:"Gender Responsiveness Impact"}),e.jsx(r,{children:"Funding Source"}),e.jsx(r,{children:"Community Benefits"}),e.jsx(r,{children:"Adjustments Needed"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(Z,{children:_.slice(f*h,f*h+h).flatMap(n=>n.impact_assessment.length>0?n.impact_assessment.map(t=>e.jsxs(E,{children:[e.jsxs(r,{children:[n.title," ",n.number]}),e.jsx(r,{children:t.outcomes_results||"No Assessment data added"}),e.jsx(r,{children:t.gender_responsiveness_impact}),e.jsx(r,{children:t.funding_source&&`${t.funding_source}%`}),e.jsx(r,{children:t.community_benefits}),e.jsx(r,{children:t.adjustments_needed}),e.jsx(r,{children:e.jsx(R,{variant:"outlined",onClick:()=>M(n,t),children:"Edit"})})]},`${n.id}-${t.id}`)):e.jsxs(E,{children:[e.jsxs(r,{children:[n.title," ",n.number]}),e.jsx(r,{colSpan:5,children:"No Assessment Data"}),e.jsx(r,{children:e.jsx(R,{variant:"contained",onClick:()=>M(n,null),children:"Add"})})]},n.id))})]})}),e.jsx(q,{sx:{position:"absolute",bottom:0,right:0},children:e.jsx(ee,{rowsPerPageOptions:[10,20,100],component:"div",count:_.length,rowsPerPage:h,page:f,onPageChange:k,onRowsPerPageChange:B})}),e.jsxs(ae,{open:W,onClose:()=>m(!1),children:[e.jsxs(re,{children:[a!=null&&a.id?"Edit":"Add"," Monitoring Data"]}),e.jsxs(se,{children:[e.jsx(p,{label:"Outcome Results",name:"outcomes_results",value:(a==null?void 0:a.outcomes_results)||"",onChange:d,fullWidth:!0,margin:"normal"}),e.jsxs(p,{label:"Funding Source",name:"funding_source",select:!0,onChange:d,value:(a==null?void 0:a.funding_source)||"",fullWidth:!0,margin:"normal",children:[e.jsx(U,{value:"Monthly",children:"General Fund"}),e.jsx(U,{value:"Quarterly",children:"Grants"}),e.jsx(U,{value:"Yearly",children:"Others"})]}),e.jsx(p,{label:"Gender Responsiveness Impact",name:"gender_responsiveness_impact",value:(a==null?void 0:a.gender_responsiveness_impact)||"",onChange:d,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Community Benefits",name:"community_benefits",value:(a==null?void 0:a.community_benefits)||"",onChange:d,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Adjustments Needed",name:"adjustments_needed",value:(a==null?void 0:a.adjustments_needed)||"",onChange:d,fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Feedback Mechanisms",name:"feedback_mechanisms",value:(a==null?void 0:a.feedback_mechanisms)||"",onChange:d,fullWidth:!0,margin:"normal"})]}),e.jsxs(he,{children:[e.jsx(R,{onClick:()=>m(!1),children:"Cancel"}),e.jsx(R,{variant:"contained",onClick:$,children:"Save"})]})]}),e.jsx(te,{open:x.open,autoHideDuration:4e3,onClose:()=>g({open:!1,message:"",severity:"info"}),children:e.jsx(ne,{onClose:()=>g({open:!1,message:"",severity:"info"}),severity:x.severity,sx:{width:"100%"},children:x.message})})]})}function jn(){const[l,o]=s.useState(0),c=(v,f)=>{o(f)};return e.jsxs(Ht,{children:[e.jsxs(Ut,{value:l,onChange:c,children:[e.jsx(Y,{label:"Records Table"}),e.jsx(Y,{label:"Coverage Table"}),e.jsx(Y,{label:"Objectives Table"}),e.jsx(Y,{label:"Budget Table"}),e.jsx(Y,{label:"Records Monitoring Table"}),e.jsx(Y,{label:"Impact Assessment Table"})]}),e.jsxs("div",{style:{marginTop:"30px"},children:[l===0&&e.jsx(tn,{formType:"A"}),l===1&&e.jsx(nn,{formType:"B"}),l===2&&e.jsx(an,{formType:"C"}),l===3&&e.jsx(rn,{formType:"D"}),l===4&&e.jsx(sn,{formType:"E"}),l===5&&e.jsx(on,{formType:"F"})]})]})}export{jn as default};
